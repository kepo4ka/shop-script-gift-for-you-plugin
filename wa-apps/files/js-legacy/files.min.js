$.ui?$.wa=$.extend(!0,$.wa,$.ui):$.wa={},$.wa=$.extend(!0,$.wa,{data:{},content:!1,get:function(t,e){return null==t?this.data:this.data[name]||e||null},set:function(t,e){return null==t||("object"==typeof t?$.extend(this.data,t):this.data[t]=value),this.data},encodeHTML:function(t){return t&&(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},decodeHTML:function(t){return t.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">")},setHash:function(t){return t=(t=(t=!(t instanceof String)&&t.toString?t.toString():t).replace(/\/\//g,"/")).replace(/^.*#/,""),$.browser&&$.browser.safari?parent?parent.window.location=parent.window.location.href.replace(/#.*/,"")+"#"+t:window.location=location.href.replace(/#.*/,"")+"#"+t:!parent||$.browser&&$.browser.msie?location.hash=t:parent.window.location.hash=t,!0},back:function(t){return 2<history.length?"number"==typeof t&&parseInt(t)==t?history.go(-t):history.go(-1):$.browser.msie&&0<history.length?history.back():t&&this.setHash(t),!1},toggleHashParam:function(t){-1==location.hash.search(t)?this.addToHash(t):this.removeFromHash(t)},addToHash:function(t){var e=location.hash;-1==e.search(t)&&(e+="/"+t+"/"),this.setHash(e)},removeFromHash:function(t){var e=location.hash;-1<e.search(t)&&(e=e.replace(t,"")),this.setHash(e)},setTitle:function(t){document.title=t},array_search:function(t,e,i){var n,i=!!i;for(n in e)if(i&&e[n]===t||!i&&e[n]==t)return n;return!1},dialogCreate:function(t,e){(e=$.extend({content:'<h1>Loading... <i class="icon16 loading"></i></h1>',buttons:null,url:null,post:null,small:!1,onload:null,oncancel:null},e)).content=$(e.content),e.buttons?e.buttons=$(e.buttons):e.buttons=$('<input type="submit" class="button gray" value="'+$_("Cancel")+'">').click(function(){e.oncancel&&e.oncancel.call(i[0]),$.wa.dialogHide()});var i=$("#"+t);(i=i.size()<=0?$('<div class="dialog" id="'+t+'" style="display: none"><div class="dialog-background"></div><div class="dialog-window"><div class="dialog-content"><div class="dialog-content-indent"></div></div><div class="dialog-buttons"><div class="dialog-buttons-gradient"></div></div></div></div>').appendTo("body"):i).find(".dialog-buttons-gradient").empty().append(e.buttons),i.find(".dialog-content-indent").empty().append(e.content),i.show(),e.small?i.addClass("small"):i.removeClass("small"),e.url&&(t=function(t){i.find(".dialog-content-indent").html(t),$.wa.waCenterDialog(i),e.onload&&e.onload.call(i[0])},e.post?$.post(e.url,e.post,t):$.get(e.url,t)),this.waCenterDialog(i);var n=function(t){if(i.is(":visible"))return t&&27==t.keyCode?(e.oncancel&&"function"==typeof e.oncancel&&e.oncancel.call(i[0]),void $.wa.dialogHide()):void $(document).one("keyup",n)};return n(),$(document).one("hashchange",$.wa.dialogHide),i},waCenterDialog:function(t){var e=(t=$(t)).find(".dialog-window"),i=e.outerWidth(!0),n=e.outerHeight(!0),o=$(window).width(),t=$(window).height(),t=(t-n)/2/t;e.css({left:Math.round(100*((o-i)/2/o))+"%",top:Math.round(100*t)+"%"})},dialogHide:function(){return $(".dialog").hide(),!1},dropdownsClose:function(){var t=$(".dropdown:not(.disabled)");t.addClass("disabled"),setTimeout(function(){t.removeClass("disabled")},600)},dropdownsCloseEnable:function(){$(document).on("click",".dropdown:not(.disabled)",this.dropdownsClickHandler)},dropdownsCloseDisable:function(){$(document).off("click",".dropdown:not(.disabled)",this.dropdownsClickHandler)},dropdownsClickHandler:function(t){var e=$(this);e.hasClass("no-click-close")||(e.addClass("disabled"),setTimeout(function(){e.removeClass("disabled")},600))},defaultInputValue:function(e,i,n){e instanceof jQuery||(e=$(e));function t(){var t=e.val();t&&t!=i||(e.val(i),e.addClass(n))}t(),e.blur(t),e.focus(function(){e.hasClass(n)&&(e.removeClass(n),e.val(""))})},loadFiles:function(t){var e=(t=!$.isArray(t)?"object"!=typeof t||$.isArray(t)?[].slice.apply(arguments):$.map(t,function(t,e){return t?e:null}):t).map(function(t){return t?"string"!=typeof t?"object"==typeof t&&"function"==typeof t.then?t:null:t.match(/\.css(\?.*)?$/)?($("<link>").appendTo("head").attr({type:"text/css",rel:"stylesheet",href:t}),null):$.ajax({cache:!0,dataType:"script",url:t}):null}).filter(function(t){return!!t});return $.when.apply($,e)},determineTimezone:function(t,i){var e,n=!1;$.each(document.cookie.split(/;\s*/g),function(t,e){if("tz"==(e=e.split("=",2))[0])return n=!0,i&&i(e[1]),!1}),n||((e={})[t+"wa-content/js/jstz/jstz.min.js"]=!window.jstz,$.wa.loadFiles(e).then(function(){var t=window.jstz.determine().name();document.cookie="tz="+jstz.determine().name()+"; sameSite=LAX";var e=new Date;e.setTime(e.getTime()+12096e5),document.cookie="oldtz="+t+"; expires="+e.toUTCString()+"; sameSite=LAX",i&&i(t)}))},util:{formatFileSize:function(t){for(var e=-1;e++,99<(t/=1024););return Math.max(t,.01).toFixed(2)+(0<=e?" "+$_(["kB","MB","GB","TB","PB","EB"][e]):"")}}}),window.wa_skip_ajax_setup||($.ajaxSetup({cache:!1}),$(document).ajaxError(function(t,e,i,n){502===e.status&&"abort"==n||i.url&&0<=i.url.indexOf("background_process")||i.data&&0<=i.data.indexOf("background_process")?console&&console.log&&console.log("Notice: XHR failed on load: "+i.url):200!==e.status&&e.responseText?$.wa.errorHandler&&!$.wa.errorHandler(e)||(-1==e.responseText.indexOf("Exception")?(document.open("text/html"),document.write(e.responseText),document.close(),$(window).one("hashchange",function(){window.location.reload()})):$.wa.dialogCreate("ajax-error",{content:"<div>"+e.responseText+"</div>"})):e.getResponseHeader("wa-session-expired")?window.location.reload():void 0!==e.responseText&&-1!=e.responseText.indexOf("Exception")&&$.wa.dialogCreate("ajax-error",{content:"<div>"+e.responseText+"</div>"})})),window.wa_skip_csrf_prefilter||$.ajaxPrefilter(function(t,e,i){var n;t.crossDomain||"POST"!==(t.type||"").toUpperCase()||(n=document.cookie.match(new RegExp("(?:^|; )_csrf=([^;]*)")))&&n[1]&&(n=decodeURIComponent(n[1]),t.data||0===t.data||(t.data=""),"string"==typeof t.data?-1==t.data.indexOf("_csrf=")&&(t.data+=(0<t.data.length?"&":"")+"_csrf="+n,i.setRequestHeader("Content-type","application/x-www-form-urlencoded")):"object"==typeof t.data&&(window.FormData&&t.data instanceof window.FormData?"function"==typeof t.data.set?t.data.set("_csrf",n):t.data.append("_csrf",n):t.data._csrf=n))}),Array.prototype.indexOf||(Array.prototype.indexOf=function(t){var e=this.length,i=Number(arguments[1])||0;for((i=i<0?Math.ceil(i):Math.floor(i))<0&&(i+=e);i<e;i++)if(i in this&&this[i]===t)return i;return-1}),$.wa.locale=$.wa.locale||{},$_=function(t,e){if(!$||!$.wa||!$.wa.locale)return console.log("JS localization failed: empty $.wa.locale"),"string"==typeof e?e:t;if(e){if(!$.wa.locale[e])return console&&console.log("JS localization failed: "+e),e;if("string"==typeof $.wa.locale[e])return $.wa.locale[e];var i=t%10;return 1==Math.floor(t/10)%10||4<i||0==i?$.wa.locale[e][2]:1==i?$.wa.locale[e][0]:$.wa.locale[e][1]}return $.wa.locale[t]?"string"==typeof $.wa.locale[t]?$.wa.locale[t]:$.wa.locale[t][0]:(console&&console.log("JS localization failed: "+t),t)},jQuery.fn.waDialog=function(s){s=jQuery.extend({loading_header:"",title:"",esc:!0,buttons:null,url:null,url_reload:!0,class:null,content:null,width:0,height:0,"min-width":0,"min-height":0,offsetTop:null,offsetLeft:null,disableButtonsOnSubmit:!1,onLoad:null,onCancel:null,onSubmit:null},s||{});var i=$(this),t=i.attr("id");t&&!i.hasClass("dialog")&&(i.removeAttr("id"),$("#"+t).length&&(s.url?(i=$("#"+t),s.url_reload||(s.url=null)):$("#"+t).remove()));var e,n,o,a=s.class||s.className?s.class||s.className:i.attr("class")||"";i.hasClass("dialog")?(s.content&&(i.find(".dialog-content-indent").html(s.content),s.title&&i.find(".dialog-content-indent").prepend("<h1>"+s.title+"</h1>")),s.buttons&&i.find(".dialog-buttons-gradient").empty().append(s.buttons)):(e=$(this),(n=i.parent()).length&&n.is(":visible")||(n=$("body")),i=$("<div "+(t?'id = "'+t+'"':"")+' class="dialog '+a+'" style="display: none"><div class="dialog-background"></div><div class="dialog-window"></div></div>').appendTo(n),e.find(".dialog-content").length||e.find(".dialog-buttons").length?($(".dialog-window",i).append(e.show()),(n=e.find(".dialog-content")).length&&(o=$('<div class="dialog-content-indent"></div>'),n.contents().appendTo(o),n.append(o)),(n=e.find(".dialog-buttons")).length&&(o=$('<div class="dialog-buttons-gradient"></div>'),n.contents().appendTo(o),n.append(o))):($(".dialog-window",i).append((s.onSubmit?'<form method="post" action="">':"")+'<div class="dialog-content"><div class="dialog-content-indent"></div></div><div class="dialog-buttons"><div class="dialog-buttons-gradient"></div></div>'+(s.onSubmit?"</form>":"")),i.find(".dialog-content-indent").append(e.show())),s.buttons&&i.find(".dialog-buttons-gradient").empty().append(s.buttons),s.url?i.find(".dialog-content-indent").append("<h1>"+(s.loading_header||"")+'<i class="icon16 loading"></i></h1>'):s.content&&i.find(".dialog-content-indent").append(s.content),s.title&&i.find(".dialog-content-indent").prepend("<h1>"+s.title+"</h1>")),i.find(".dialog-background").length||i.prepend('<div class="dialog-background"> </div>'),i.unbind("close").bind("close",function(){s.onClose&&s.onClose.call($(this)),$(this).hide()});for(var r=["width","height","min-width","min-height"],l=0;l<r.length;l++)s[r[l]]&&(("height"==r[l]&&s[r[l]]<"300px"||"width"==r[l]&&s[r[l]]<"400px")&&i.find("div.dialog-window").css("min-"+r[l],s[r[l]]),i.find("div.dialog-window").css(r[l],s[r[l]]));return s.disableButtonsOnSubmit&&i.find("input[type=submit]").removeAttr("disabled"),i.parent().length||i.appendTo("body"),i.show(),s.url?jQuery.get(s.url,function(t){var e=$(t);e.find(".dialog-content").length||e.find(".dialog-buttons").length?(e.find(".dialog-content").length&&i.find(".dialog-content-indent").empty().append(e.find(".dialog-content").contents()),e.find(".dialog-buttons").length&&i.find(".dialog-buttons-gradient").empty().append(e.find(".dialog-buttons").contents())):i.find(".dialog-content-indent").html(t),i.trigger("wa-resize"),s.onLoad&&s.onLoad.call(i.get(0))}):s.onLoad&&s.onLoad.call(i.get(0)),i.find(".dialog-buttons").delegate(".cancel","click",function(t){return t.stopPropagation(),t.preventDefault(),s.onCancel&&s.onCancel.call(i.get(0)),i.trigger("close"),!1}),s.onSubmit&&i.find("form").unbind("submit").submit(function(e){s.disableButtonsOnSubmit&&i.find("input[type=submit]").attr("disabled","disabled");try{return s.onSubmit.apply(this,[i,e])}catch(t){throw e.preventDefault(),t}}),i.unbind("wa-resize").bind("wa-resize",function(){var t=jQuery(this).find(".dialog-window"),e=t.width(),i=t.height();jQuery("body").css("min-height",i+"px");var n=jQuery(window).width(),o=jQuery(window).height()-60,n=(n-e)/2/n,o=(o-i-60)/2/o;o<0&&(o=0),n<0&&(n=0),t.css({left:s.offsetLeft||Math.round(100*n)+"%",top:s.offsetTop||Math.round(100*o)+"%"})}).trigger("wa-resize"),s.esc&&i.unbind("esc").bind("esc",function(){i.trigger("close")}),i},jQuery(window).resize(function(){jQuery(".dialog:visible").trigger("wa-resize")}),jQuery(document).keyup(function(t){27==t.keyCode&&jQuery(".dialog:visible").trigger("esc")}),function(s){"undefined"==typeof console&&(console=void 0!==window.console?window.console:{}),console.log=console.log||function(){},console.debug=console.debug||console.log,console.warn=console.warn||console.log,console.error=console.error||function(){for(var t=[],e=0;e<arguments.length;e++)t.push(arguments[e]);alert(t.join("\n"))},console.trace=console.trace||console.log,console.group=console.group||console.log,console.groupEnd=console.groupEnd||console.log,console.profile=console.profile||console.log,console.profileEnd=console.profileEnd||console.log,s.History={options:{debug:!1},state:"",$window:null,$iframe:null,handlers:{generic:[],specific:{}},format:function(t){return t=t.replace(/^.+?#/g,"").replace(/^#?\/?|\/?$/g,"")},getState:function(){return s.History.state},setState:function(t){var e=s.History;return t=e.format(t),e.state=t,e.state},getHash:function(){var t,e=s.History;return t=parent&&!s.browser.msie?parent.window.location.hash:window.location.hash||location.hash,t=e.format(t)},setHash:function(t){s.History;t=(t=s.History.format(t)).replace(/^\/?|\/?(\?)|\/?$/g,"/$1"),void 0!==window.location.hash||(location.hash=t),s.browser.msie&&parseInt(s.browser.version,10)<8&&(s.History.$iframe.contentWindow.document.open(),s.History.$iframe.contentWindow.document.close())},go:function(t){var e=s.History;return t=e.format(t),e.getHash()!==t?e.setHash(t):(e.setState(t),e.trigger()),!0},hashchange:function(t){var e=s.History;e.options.debug&&console.debug("History.hashchange",this,arguments);var i=e.getHash(),n=e.getState();return!(!e.$iframe&&n===i||e.$iframe&&e.hash===e.$iframe.contentWindow.document.location.hash)&&(n!==i&&(e.setState(i),e.trigger(),!0))},bind:function(t,e){var i=s.History;return e?(void 0===i.handlers.specific[t]&&(i.handlers.specific[t]=[]),i.handlers.specific[t].push(e)):i.handlers.generic.push(e=t),!0},trigger:function(t){var e,i,n,o=s.History;if(void 0===t&&(t=o.getState()),void 0!==o.handlers.specific[t])for(e=0,i=(n=o.handlers.specific[t]).length;e<i;++e)(0,n[e])(t);for(e=0,i=(n=o.handlers.generic).length;e<i;++e)(0,n[e])(t);return!0},construct:function(){var t=s.History;return s(document).ready(function(){t.domReady()}),!0},configure:function(t){var e=s.History;return e.options=s.extend(e.options,t),!0},domReadied:!1,domReady:function(){var t=s.History;if(!t.domRedied)return t.domRedied=!0,t.$window=s(window),t.$window.bind("hashchange",this.hashchange),setTimeout(t.hashchangeLoader,200),!0},hashchangeLoader:function(){var t,e=s.History;return s.browser.msie&&8<=parseInt(s.browser.version)?(t=e.getHash())&&e.$window.trigger("hashchange"):(t=s.browser.msie?(e.$iframe=s('<iframe id="jquery-history-iframe" style="display: none;"></$iframe>').prependTo(document.body)[0],e.$iframe.contentWindow.document.open(),e.$iframe.contentWindow.document.close(),(t=e.getHash())&&(e.$iframe.contentWindow.document.location.hash=t),function(){var t=e.format(e.$iframe.contentWindow.document.location.hash);e.getState()!==t&&e.setHash(e.$iframe.contentWindow.document.location.hash);t=e.getHash();e.getState()!==t&&e.go(t)}):function(){var t=e.getHash();e.getState()!==t&&e.go(t)},s.browser.msie&&parseInt(s.browser.version)<8?setInterval(t,1500):setInterval(t,200)),!0}},s.History.construct()}(jQuery),function(n,i){n.store=function(t,e){var i=this;if("string"==typeof t){if(!n.store.drivers[t])throw new Error("Unknown driver "+t);this.driver=n.store.drivers[t]}else if("object"==typeof t){if(!(n.isFunction(t.init)&&n.isFunction(t.get)&&n.isFunction(t.set)&&n.isFunction(t.del)&&n.isFunction(t.flush)))throw new Error("The specified driver does not fulfill the API requirements");this.driver=t}else n.each(n.store.drivers,function(){return!n.isFunction(this.available)||!this.available()||(i.driver=this,!1===i.driver.init()&&!(i.driver=null))});e=e||n.store.serializers,this.serializers={},n.each(e,function(t,e){return!n.isFunction(this.init)||(i.serializers[t]=this,void i.serializers[t].init(i.encoders,i.decoders))})},n.extend(n.store.prototype,{get:function(t){t=this.driver.get(t);return this.driver.encodes?t:this.unserialize(t)},set:function(t,e){this.driver.set(t,this.driver.encodes?e:this.serialize(e))},del:function(t){this.driver.del(t)},flush:function(){this.driver.flush()},driver:i,encoders:[],decoders:[],serialize:function(e){var i=this;return n.each(this.encoders,function(){var t=i.serializers[this+""];if(!t||!t.encode)return!0;try{e=t.encode(e)}catch(t){}}),e},unserialize:function(e){var i=this;return e&&(n.each(this.decoders,function(){var t=i.serializers[this+""];if(!t||!t.decode)return!0;e=t.decode(e)}),e)}}),n.store.drivers={localStorage:{ident:"$.store.drivers.localStorage",scope:"browser",available:function(){try{return!!window.localStorage}catch(t){return!1}},init:n.noop,get:function(t){return window.localStorage.getItem(t)},set:function(t,e){window.localStorage.setItem(t,e)},del:function(t){window.localStorage.removeItem(t)},flush:function(){window.localStorage.clear()}},userData:{ident:"$.store.drivers.userData",element:null,nodeName:"userdatadriver",scope:"browser",initialized:!1,available:function(){try{return!(!document.documentElement||!document.documentElement.addBehavior)}catch(t){return!1}},init:function(){if(!this.initialized)try{this.element=document.createElement(this.nodeName),document.documentElement.insertBefore(this.element,document.getElementsByTagName("title")[0]),this.element.addBehavior("#default#userData"),this.initialized=!0}catch(t){return!1}},get:function(t){return this.element.load(this.nodeName),this.element.getAttribute(t)},set:function(t,e){this.element.setAttribute(t,e),this.element.save(this.nodeName)},del:function(t){this.element.removeAttribute(t),this.element.save(this.nodeName)},flush:function(){this.element.expires=(new Date).toUTCString(),this.element.save(this.nodeName)}},windowName:{ident:"$.store.drivers.windowName",scope:"window",cache:{},encodes:!0,available:function(){return!0},init:function(){this.load()},save:function(){window.name=n.store.serializers.json.encode(this.cache)},load:function(){try{this.cache=n.store.serializers.json.decode(window.name+""),"object"!=typeof this.cache&&(this.cache={})}catch(t){this.cache={},window.name="{}"}},get:function(t){return this.cache[t]},set:function(t,e){this.cache[t]=e,this.save()},del:function(e){try{delete this.cache[e]}catch(t){this.cache[e]=i}this.save()},flush:function(){window.name="{}"}}},n.store.serializers={json:{ident:"$.store.serializers.json",init:function(t,e){t.push("json"),e.push("json")},encode:("object"==typeof JSON?JSON:n.JSON).stringify,decode:("object"==typeof JSON?JSON:n.JSON).parse},xml:{ident:"$.store.serializers.xml",init:function(t,e){t.unshift("xml"),e.push("xml")},isXML:function(t){t=(t?t.ownerDocument||t:0).documentElement;return!!t&&"html"!==t.nodeName.toLowerCase()},encode:function(e){if(!e||e._serialized||!this.isXML(e))return e;var i={_serialized:this.ident,value:e};try{return i.value=(new XMLSerializer).serializeToString(e),i}catch(t){try{return i.value=e.xml,i}catch(t){}}return e},decode:function(t){if(!t||!t._serialized||t._serialized!=this.ident)return t;var e="DOMParser"in window&&(new DOMParser).parseFromString;return(e=!e&&window.ActiveXObject?function(t){var e=new ActiveXObject("Microsoft.XMLDOM");return e.async="false",e.loadXML(t),e}:e)?(t.value=e.call("DOMParser"in window&&new DOMParser||window,t.value,"text/xml"),this.isXML(t.value)?t.value:i):i}}}}(jQuery),function(r){function n(t,e){var i=t.nodeName.toLowerCase();if("area"!==i)return(/input|select|textarea|button|object/.test(i)?!t.disabled:"a"==i&&t.href||e)&&o(t);i=t.parentNode,e=i.name;return!(!t.href||!e||"map"!==i.nodeName.toLowerCase())&&(!!(e=r("img[usemap=#"+e+"]")[0])&&o(e))}function o(t){return!r(t).parents().andSelf().filter(function(){return"hidden"===r.curCSS(this,"visibility")||r.expr.filters.hidden(this)}).length}r.ui=r.ui||{},r.ui.version||(r.extend(r.ui,{version:"1.8.24",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),r.fn.extend({propAttr:r.fn.prop||r.fn.attr,_focus:r.fn.focus,focus:function(e,i){return"number"==typeof e?this.each(function(){var t=this;setTimeout(function(){r(t).focus(),i&&i.call(t)},e)}):this._focus.apply(this,arguments)},scrollParent:function(){var t=(r.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(r.curCSS(this,"position",1))&&/(auto|scroll)/.test(r.curCSS(this,"overflow",1)+r.curCSS(this,"overflow-y",1)+r.curCSS(this,"overflow-x",1))}):this.parents().filter(function(){return/(auto|scroll)/.test(r.curCSS(this,"overflow",1)+r.curCSS(this,"overflow-y",1)+r.curCSS(this,"overflow-x",1))})).eq(0);return/fixed/.test(this.css("position"))||!t.length?r(document):t},zIndex:function(t){if(void 0!==t)return this.css("zIndex",t);if(this.length)for(var e,i,n=r(this[0]);n.length&&n[0]!==document;){if(("absolute"===(e=n.css("position"))||"relative"===e||"fixed"===e)&&(i=parseInt(n.css("zIndex"),10),!isNaN(i)&&0!==i))return i;n=n.parent()}return 0},disableSelection:function(){return this.bind((r.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(t){t.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),r("<a>").outerWidth(1).jquery||r.each(["Width","Height"],function(t,i){function n(t,e,i,n){return r.each(o,function(){e-=parseFloat(r.curCSS(t,"padding"+this,!0))||0,i&&(e-=parseFloat(r.curCSS(t,"border"+this+"Width",!0))||0),n&&(e-=parseFloat(r.curCSS(t,"margin"+this,!0))||0)}),e}var o="Width"===i?["Left","Right"]:["Top","Bottom"],s=i.toLowerCase(),a={innerWidth:r.fn.innerWidth,innerHeight:r.fn.innerHeight,outerWidth:r.fn.outerWidth,outerHeight:r.fn.outerHeight};r.fn["inner"+i]=function(t){return void 0===t?a["inner"+i].call(this):this.each(function(){r(this).css(s,n(this,t)+"px")})},r.fn["outer"+i]=function(t,e){return"number"!=typeof t?a["outer"+i].call(this,t):this.each(function(){r(this).css(s,n(this,t,!0,e)+"px")})}}),r.extend(r.expr[":"],{data:r.expr.createPseudo?r.expr.createPseudo(function(e){return function(t){return!!r.data(t,e)}}):function(t,e,i){return!!r.data(t,i[3])},focusable:function(t){return n(t,!isNaN(r.attr(t,"tabindex")))},tabbable:function(t){var e=r.attr(t,"tabindex"),i=isNaN(e);return(i||0<=e)&&n(t,!i)}}),r(function(){var t=document.body,e=t.appendChild(document.createElement("div"));e.offsetHeight,r.extend(e.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),r.support.minHeight=100===e.offsetHeight,r.support.selectstart="onselectstart"in e,t.removeChild(e).style.display="none"}),r.curCSS||(r.curCSS=r.css),r.extend(r.ui,{plugin:{add:function(t,e,i){var n,o=r.ui[t].prototype;for(n in i)o.plugins[n]=o.plugins[n]||[],o.plugins[n].push([e,i[n]])},call:function(t,e,i){var n=t.plugins[e];if(n&&t.element[0].parentNode)for(var o=0;o<n.length;o++)t.options[n[o][0]]&&n[o][1].apply(t.element,i)}},contains:function(t,e){return document.compareDocumentPosition?16&t.compareDocumentPosition(e):t!==e&&t.contains(e)},hasScroll:function(t,e){if("hidden"===r(t).css("overflow"))return!1;var i=e&&"left"===e?"scrollLeft":"scrollTop",e=!1;return 0<t[i]||(t[i]=1,e=0<t[i],t[i]=0,e)},isOverAxis:function(t,e,i){return e<t&&t<e+i},isOver:function(t,e,i,n,o,s){return r.ui.isOverAxis(t,i,o)&&r.ui.isOverAxis(e,n,s)}}))}(jQuery),function(a){var n,i;a.cleanData?(n=a.cleanData,a.cleanData=function(t){for(var e,i=0;null!=(e=t[i]);i++)try{a(e).triggerHandler("remove")}catch(t){}n(t)}):(i=a.fn.remove,a.fn.remove=function(t,e){return this.each(function(){return e||(t&&!a.filter(t,[this]).length||a("*",this).add([this]).each(function(){try{a(this).triggerHandler("remove")}catch(t){}})),i.call(a(this),t,e)})}),a.widget=function(e,t,i){var n=e.split(".")[0],o=n+"-"+(e=e.split(".")[1]);i||(i=t,t=a.Widget),a.expr[":"][o]=function(t){return!!a.data(t,e)},a[n]=a[n]||{},a[n][e]=function(t,e){arguments.length&&this._createWidget(t,e)};t=new t;t.options=a.extend(!0,{},t.options),a[n][e].prototype=a.extend(!0,t,{namespace:n,widgetName:e,widgetEventPrefix:a[n][e].prototype.widgetEventPrefix||e,widgetBaseClass:o},i),a.widget.bridge(e,a[n][e])},a.widget.bridge=function(s,e){a.fn[s]=function(i){var t="string"==typeof i,n=Array.prototype.slice.call(arguments,1),o=this;return i=!t&&n.length?a.extend.apply(null,[!0,i].concat(n)):i,t&&"_"===i.charAt(0)||(t?this.each(function(){var t=a.data(this,s),e=t&&a.isFunction(t[i])?t[i].apply(t,n):t;if(e!==t&&void 0!==e)return o=e,!1}):this.each(function(){var t=a.data(this,s);t?t.option(i||{})._init():a.data(this,s,new e(i,this))})),o}},a.Widget=function(t,e){arguments.length&&this._createWidget(t,e)},a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(t,e){a.data(e,this.widgetName,this),this.element=a(e),this.options=a.extend(!0,{},this.options,this._getCreateOptions(),t);var i=this;this.element.bind("remove."+this.widgetName,function(){i.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(t,e){var i=t;if(0===arguments.length)return a.extend({},this.options);if("string"==typeof t){if(void 0===e)return this.options[t];(i={})[t]=e}return this._setOptions(i),this},_setOptions:function(t){var i=this;return a.each(t,function(t,e){i._setOption(t,e)}),this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&this.widget()[e?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",e),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(t,e,i){var n,o,s=this.options[t];if(i=i||{},(e=a.Event(e)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),e.target=this.element[0],o=e.originalEvent)for(n in o)n in e||(e[n]=o[n]);return this.element.trigger(e,i),!(a.isFunction(s)&&!1===s.call(this.element[0],e,i)||e.isDefaultPrevented())}}}(jQuery),function(o){var s=!1;o(document).mouseup(function(t){s=!1}),o.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(t){if(!0===o.data(t.target,e.widgetName+".preventClickEvent"))return o.removeData(t.target,e.widgetName+".preventClickEvent"),t.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&o(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!s){this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var e=this,i=1==t.which,n=!("string"!=typeof this.options.cancel||!t.target.nodeName)&&o(t.target).closest(this.options.cancel).length;return i&&!n&&this._mouseCapture(t)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){e.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(t),!this._mouseStarted)?t.preventDefault():(!0===o.data(t.target,this.widgetName+".preventClickEvent")&&o.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return e._mouseMove(t)},this._mouseUpDelegate=function(t){return e._mouseUp(t)},o(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),s=!0),!0):!0}},_mouseMove:function(t){return!o.browser.msie||9<=document.documentMode||t.button?this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,t),this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted):this._mouseUp(t)},_mouseUp:function(t){return o(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target==this._mouseDownEvent.target&&o.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(t){return this.mouseDelayMet},_mouseStart:function(t){},_mouseDrag:function(t){},_mouseStop:function(t){},_mouseCapture:function(t){return!0}})}(jQuery),function(g){g.ui=g.ui||{};var i=/left|center|right/,n=/top|center|bottom/,m="center",v={},o=g.fn.position,s=g.fn.offset;g.fn.position=function(c){if(!c||!c.of)return o.apply(this,arguments);c=g.extend({},c);var d,h,t=g(c.of),e=t[0],f=(c.collision||"flip").split(" "),u=c.offset?c.offset.split(" "):[0,0],p=9===e.nodeType?(d=t.width(),h=t.height(),{top:0,left:0}):e.setTimeout?(d=t.width(),h=t.height(),{top:t.scrollTop(),left:t.scrollLeft()}):e.preventDefault?(c.at="left top",d=h=0,{top:c.of.pageY,left:c.of.pageX}):(d=t.outerWidth(),h=t.outerHeight(),t.offset());return g.each(["my","at"],function(){var t=(c[this]||"").split(" ");(t=1===t.length?i.test(t[0])?t.concat([m]):n.test(t[0])?[m].concat(t):[m,m]:t)[0]=i.test(t[0])?t[0]:m,t[1]=n.test(t[1])?t[1]:m,c[this]=t}),1===f.length&&(f[1]=f[0]),u[0]=parseInt(u[0],10)||0,1===u.length&&(u[1]=u[0]),u[1]=parseInt(u[1],10)||0,"right"===c.at[0]?p.left+=d:c.at[0]===m&&(p.left+=d/2),"bottom"===c.at[1]?p.top+=h:c.at[1]===m&&(p.top+=h/2),p.left+=u[0],p.top+=u[1],this.each(function(){var i,t=g(this),n=t.outerWidth(),o=t.outerHeight(),e=parseInt(g.curCSS(this,"marginLeft",!0))||0,s=parseInt(g.curCSS(this,"marginTop",!0))||0,a=n+e+(parseInt(g.curCSS(this,"marginRight",!0))||0),r=o+s+(parseInt(g.curCSS(this,"marginBottom",!0))||0),l=g.extend({},p);"right"===c.my[0]?l.left-=n:c.my[0]===m&&(l.left-=n/2),"bottom"===c.my[1]?l.top-=o:c.my[1]===m&&(l.top-=o/2),v.fractions||(l.left=Math.round(l.left),l.top=Math.round(l.top)),i={left:l.left-e,top:l.top-s},g.each(["left","top"],function(t,e){g.ui.position[f[t]]&&g.ui.position[f[t]][e](l,{targetWidth:d,targetHeight:h,elemWidth:n,elemHeight:o,collisionPosition:i,collisionWidth:a,collisionHeight:r,offset:u,my:c.my,at:c.at})}),g.fn.bgiframe&&t.bgiframe(),t.offset(g.extend(l,{using:c.using}))})},g.ui.position={fit:{left:function(t,e){var i=g(window),i=e.collisionPosition.left+e.collisionWidth-i.width()-i.scrollLeft();t.left=0<i?t.left-i:Math.max(t.left-e.collisionPosition.left,t.left)},top:function(t,e){var i=g(window),i=e.collisionPosition.top+e.collisionHeight-i.height()-i.scrollTop();t.top=0<i?t.top-i:Math.max(t.top-e.collisionPosition.top,t.top)}},flip:{left:function(t,e){var i,n,o,s;e.at[0]!==m&&(s=g(window),i=e.collisionPosition.left+e.collisionWidth-s.width()-s.scrollLeft(),n="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,o="left"===e.at[0]?e.targetWidth:-e.targetWidth,s=-2*e.offset[0],t.left+=e.collisionPosition.left<0||0<i?n+o+s:0)},top:function(t,e){var i,n,o,s;e.at[1]!==m&&(s=g(window),i=e.collisionPosition.top+e.collisionHeight-s.height()-s.scrollTop(),n="top"===e.my[1]?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,o="top"===e.at[1]?e.targetHeight:-e.targetHeight,s=-2*e.offset[1],t.top+=e.collisionPosition.top<0||0<i?n+o+s:0)}}},g.offset.setOffset||(g.offset.setOffset=function(t,e){/static/.test(g.curCSS(t,"position"))&&(t.style.position="relative");var i=g(t),n=i.offset(),o=parseInt(g.curCSS(t,"top",!0),10)||0,s=parseInt(g.curCSS(t,"left",!0),10)||0,s={top:e.top-n.top+o,left:e.left-n.left+s};"using"in e?e.using.call(t,s):i.css(s)},g.fn.offset=function(e){var t=this[0];return t&&t.ownerDocument?e?g.isFunction(e)?this.each(function(t){g(this).offset(e.call(this,t,g(this).offset()))}):this.each(function(){g.offset.setOffset(this,e)}):s.call(this):null}),g.curCSS||(g.curCSS=g.css),function(){var t,e,i=document.getElementsByTagName("body")[0],n=document.createElement("div"),o=document.createElement(i?"div":"body"),s={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};for(e in i&&g.extend(s,{position:"absolute",left:"-1000px",top:"-1000px"}),s)o.style[e]=s[e];o.appendChild(n),(t=i||document.documentElement).insertBefore(o,t.firstChild),n.style.cssText="position: absolute; left: 10.7432222px; top: 10.432325px; height: 30px; width: 201px;",n=g(n).offset(function(t,e){return e}).offset(),o.innerHTML="",t.removeChild(o),i=n.top+n.left+(i?2e3:0),v.fractions=21<i&&i<22}()}(jQuery),function(o){o.widget("ui.autocomplete",{options:{minLength:1,delay:300},_create:function(){var i=this,n=this.element[0].ownerDocument;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(t){var e=o.ui.keyCode;switch(t.keyCode){case e.PAGE_UP:i._move("previousPage",t);break;case e.PAGE_DOWN:i._move("nextPage",t);break;case e.UP:i._move("previous",t),t.preventDefault();break;case e.DOWN:i._move("next",t),t.preventDefault();break;case e.ENTER:case e.NUMPAD_ENTER:i.menu.active&&t.preventDefault();case e.TAB:if(!i.menu.active)return;i.menu.select(t);break;case e.ESCAPE:i.element.val(i.term),i.close(t);break;case e.LEFT:case e.RIGHT:case e.SHIFT:case e.CONTROL:case e.ALT:case e.COMMAND:case e.COMMAND_RIGHT:case e.INSERT:case e.CAPS_LOCK:case e.END:case e.HOME:break;default:clearTimeout(i.searching),i.searching=setTimeout(function(){i.search(null,t)},i.options.delay)}}).bind("focus.autocomplete",function(){i.selectedItem=null,i.previous=i.element.val()}).bind("blur.autocomplete",function(t){clearTimeout(i.searching),i.closing=setTimeout(function(){i.close(t),i._change(t)},150)}),this._initSource(),this.response=function(){return i._response.apply(i,arguments)},this.menu=o("<ul></ul>").addClass("ui-autocomplete").appendTo("body",n).mousedown(function(){setTimeout(function(){clearTimeout(i.closing)},13)}).menu({focus:function(t,e){e=e.item.data("item.autocomplete"),!1!==i._trigger("focus",null,{item:e})&&/^key/.test(t.originalEvent.type)&&i.element.val(e.value)},selected:function(t,e){e=e.item.data("item.autocomplete"),!1!==i._trigger("select",t,{item:e})&&i.element.val(e.value),i.close(t),t=i.previous,i.element[0]!==n.activeElement&&(i.element.focus(),i.previous=t),i.selectedItem=e},blur:function(){i.menu.element.is(":visible")&&i.element.val(i.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu"),o.fn.bgiframe&&this.menu.element.bgiframe()},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup"),this.menu.element.remove(),o.Widget.prototype.destroy.call(this)},_setOption:function(t){o.Widget.prototype._setOption.apply(this,arguments),"source"===t&&this._initSource()},_initSource:function(){var i,n;o.isArray(this.options.source)?(i=this.options.source,this.source=function(t,e){e(o.ui.autocomplete.filter(i,t.term))}):"string"==typeof this.options.source?(n=this.options.source,this.source=function(t,e){o.getJSON(n,t,e)}):this.source=this.options.source},search:function(t,e){return(t=null!=t?t:this.element.val()).length<this.options.minLength?this.close(e):(clearTimeout(this.closing),!1!==this._trigger("search")?this._search(t):void 0)},_search:function(t){this.term=this.element.addClass("ui-autocomplete-loading").val(),this.source({term:t},this.response)},_response:function(t){t.length?(t=this._normalize(t),this._suggest(t),this._trigger("open")):this.close(),this.element.removeClass("ui-autocomplete-loading")},close:function(t){clearTimeout(this.closing),this.menu.element.is(":visible")&&(this._trigger("close",t),this.menu.element.hide(),this.menu.deactivate())},_change:function(t){this.previous!==this.element.val()&&this._trigger("change",t,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:o.map(t,function(t){return"string"==typeof t?{label:t,value:t}:o.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(t){var e,i=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(i,t),this.menu.deactivate(),this.menu.refresh(),this.menu.element.show().position({my:"left top",at:"left bottom",of:this.element,collision:"none"}),t=i.width("").width(),e=this.element.width(),i.width(Math.max(t,e))},_renderMenu:function(i,t){var n=this;o.each(t,function(t,e){n._renderItem(i,e)})},_renderItem:function(t,e){return o("<li></li>").data("item.autocomplete",e).append("<a>"+e.label+"</a>").appendTo(t)},_move:function(t,e){this.menu.element.is(":visible")?this.menu.first()&&/^previous/.test(t)||this.menu.last()&&/^next/.test(t)?(this.element.val(this.term),this.menu.deactivate()):this.menu[t](e):this.search(null,e)},widget:function(){return this.menu.element}}),o.extend(o.ui.autocomplete,{escapeRegex:function(t){return t.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1")},filter:function(t,e){var i=new RegExp(o.ui.autocomplete.escapeRegex(e),"i");return o.grep(t,function(t){return i.test(t.label||t.value||t)})}})}(jQuery),function(o){o.widget("ui.menu",{_create:function(){var e=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(t){o(t.target).closest(".ui-menu-item a").length&&(t.preventDefault(),e.select(t))}),this.refresh()},refresh:function(){var e=this;this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem").children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(t){e.activate(t,o(this).parent())}).mouseleave(function(){e.deactivate()})},activate:function(t,e){var i,n,o;this.deactivate(),this.hasScroll()&&(i=e.offset().top-this.element.offset().top,n=this.element.attr("scrollTop"),o=this.element.height(),i<0?this.element.attr("scrollTop",n+i):o<i&&this.element.attr("scrollTop",n+i-o+e.height())),this.active=e.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end(),this._trigger("focus",t,{item:e})},deactivate:function(){this.active&&(this.active.children("a").removeClass("ui-state-hover").removeAttr("id"),this._trigger("blur"),this.active=null)},next:function(t){this.move("next",".ui-menu-item:first",t)},previous:function(t){this.move("prev",".ui-menu-item:last",t)},first:function(){return this.active&&!this.active.prev().length},last:function(){return this.active&&!this.active.next().length},move:function(t,e,i){this.active&&(t=this.active[t+"All"](".ui-menu-item").eq(0)).length?this.activate(i,t):this.activate(i,this.element.children(e))},nextPage:function(t){var e,i,n;this.hasScroll()?!this.active||this.last()?this.activate(t,this.element.children(":first")):(e=this.active.offset().top,i=this.element.height(),(n=this.element.children("li").filter(function(){var t=o(this).offset().top-e-i+o(this).height();return t<10&&-10<t})).length||(n=this.element.children(":last")),this.activate(t,n)):this.activate(t,this.element.children(!this.active||this.last()?":first":":last"))},previousPage:function(t){var e,i;this.hasScroll()?!this.active||this.first()?this.activate(t,this.element.children(":last")):(e=this.active.offset().top,i=this.element.height(),result=this.element.children("li").filter(function(){var t=o(this).offset().top-e+i-o(this).height();return t<10&&-10<t}),result.length||(result=this.element.children(":first")),this.activate(t,result)):this.activate(t,this.element.children(!this.active||this.first()?":last":":first"))},hasScroll:function(){return this.element.height()<this.element.attr("scrollHeight")},select:function(t){this._trigger("selected",t,{item:this.active})}})}(jQuery),function(b){b.widget("ui.draggable",b.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){"original"!=this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},destroy:function(){if(this.element.data("draggable"))return this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this},_mouseCapture:function(t){var e=this.options;return!(this.helper||e.disabled||b(t.target).is(".ui-resizable-handle"))&&(this.handle=this._getHandle(t),!!this.handle)},_mouseStart:function(t){var e=this.options;return this.helper=this._createHelper(t),this._cacheHelperProportions(),b.ui.ddmanager&&(b.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},b.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,e.cursorAt&&this._adjustOffsetFromHelper(e.cursorAt),e.containment&&this._setContainment(),!1===this._trigger("start",t)?(this._clear(),!1):(this._cacheHelperProportions(),b.ui.ddmanager&&!e.dropBehaviour&&b.ui.ddmanager.prepareOffsets(this,t),this.helper.addClass("ui-draggable-dragging"),this._mouseDrag(t,!0),!0)},_mouseDrag:function(t,e){if(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),!e){if(e=this._uiHash(),!1===this._trigger("drag",t,e))return this._mouseUp({}),!1;this.position=e.position}return this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px"),b.ui.ddmanager&&b.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var e,i=!1;return b.ui.ddmanager&&!this.options.dropBehaviour&&(i=b.ui.ddmanager.drop(this,t)),this.dropped&&(i=this.dropped,this.dropped=!1),this.element[0]&&this.element[0].parentNode&&("invalid"==this.options.revert&&!i||"valid"==this.options.revert&&i||!0===this.options.revert||b.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)?b((e=this).helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==e._trigger("stop",t)&&e._clear()}):!1!==this._trigger("stop",t)&&this._clear()),!1},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){var e=!this.options.handle||!b(this.options.handle,this.element).length;return b(this.options.handle,this.element).find("*").andSelf().each(function(){this==t.target&&(e=!0)}),e},_createHelper:function(t){var e=this.options;return(t=b.isFunction(e.helper)?b(e.helper.apply(this.element[0],[t])):"clone"==e.helper?this.element.clone():this.element).parents("body").length||t.appendTo("parent"==e.appendTo?this.element[0].parentNode:e.appendTo),t[0]==this.element[0]||/(fixed|absolute)/.test(t.css("position"))||t.css("position","absolute"),t},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),"left"in(t=b.isArray(t)?{left:+t[0],top:+t[1]||0}:t)&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&b.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),{top:(t=this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&b.browser.msie?{top:0,left:0}:t).top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!=this.cssPosition)return{top:0,left:0};var t=this.element.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,e,i=this.options;"parent"==i.containment&&(i.containment=this.helper[0].parentNode),"document"!=i.containment&&"window"!=i.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,b("document"==i.containment?document:window).width()-this.helperProportions.width-this.margins.left,(b("document"==i.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(i.containment)||i.containment.constructor==Array?i.containment.constructor==Array&&(this.containment=i.containment):(t=b(i.containment)[0])&&(i=b(i.containment).offset(),e="hidden"!=b(t).css("overflow"),this.containment=[i.left+(parseInt(b(t).css("borderLeftWidth"),10)||0)+(parseInt(b(t).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(b(t).css("borderTopWidth"),10)||0)+(parseInt(b(t).css("paddingTop"),10)||0)-this.margins.top,i.left+(e?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(b(t).css("borderLeftWidth"),10)||0)-(parseInt(b(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(e?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(b(t).css("borderTopWidth"),10)||0)-(parseInt(b(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,e){e=e||this.position,t="absolute"==t?1:-1;var i="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&b.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,n=/(html|body)/i.test(i[0].tagName);return{top:e.top+this.offset.relative.top*t+this.offset.parent.top*t-(b.browser.safari&&b.browser.version<526&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():n?0:i.scrollTop())*t),left:e.left+this.offset.relative.left*t+this.offset.parent.left*t-(b.browser.safari&&b.browser.version<526&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():n?0:i.scrollLeft())*t)}},_generatePosition:function(t){var e=this.options,i="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&b.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,n=/(html|body)/i.test(i[0].tagName),o=t.pageX,s=t.pageY;return this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(o=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(s=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(o=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(s=this.containment[3]+this.offset.click.top)),e.grid&&(s=this.originalPageY+Math.round((s-this.originalPageY)/e.grid[1])*e.grid[1],s=this.containment&&(s-this.offset.click.top<this.containment[1]||s-this.offset.click.top>this.containment[3])?s-this.offset.click.top<this.containment[1]?s+e.grid[1]:s-e.grid[1]:s,o=this.originalPageX+Math.round((o-this.originalPageX)/e.grid[0])*e.grid[0],o=this.containment&&(o-this.offset.click.left<this.containment[0]||o-this.offset.click.left>this.containment[2])?o-this.offset.click.left<this.containment[0]?o+e.grid[0]:o-e.grid[0]:o)),{top:s-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(b.browser.safari&&b.browser.version<526&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():n?0:i.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(b.browser.safari&&b.browser.version<526&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():n?0:i.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]==this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,e,i){return i=i||this._uiHash(),b.ui.plugin.call(this,t,[e,i]),"drag"==t&&(this.positionAbs=this._convertPositionTo("absolute")),b.Widget.prototype._trigger.call(this,t,e,i)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),b.extend(b.ui.draggable,{version:"1.8.2"}),b.ui.plugin.add("draggable","connectToSortable",{start:function(e,t){var i=b(this).data("draggable"),n=i.options,o=b.extend({},t,{item:i.element});i.sortables=[],b(n.connectToSortable).each(function(){var t=b.data(this,"sortable");t&&!t.options.disabled&&(i.sortables.push({instance:t,shouldRevert:t.options.revert}),t._refreshItems(),t._trigger("activate",e,o))})},stop:function(t,e){var i=b(this).data("draggable"),n=b.extend({},e,{item:i.element});b.each(i.sortables,function(){this.instance.isOver?(this.instance.isOver=0,i.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,"original"==i.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,n))})},drag:function(t,e){var i=b(this).data("draggable"),n=this;b.each(i.sortables,function(){this.instance.positionAbs=i.positionAbs,this.instance.helperProportions=i.helperProportions,this.instance.offset.click=i.offset.click,this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=b(n).clone().appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return e.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=i.offset.click.top,this.instance.offset.click.left=i.offset.click.left,this.instance.offset.parent.left-=i.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=i.offset.parent.top-this.instance.offset.parent.top,i._trigger("toSortable",t),i.dropped=this.instance.element,i.currentItem=i.element,this.instance.fromOutside=i),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),i._trigger("fromSortable",t),i.dropped=!1)})}}),b.ui.plugin.add("draggable","cursor",{start:function(){var t=b("body"),e=b(this).data("draggable").options;t.css("cursor")&&(e._cursor=t.css("cursor")),t.css("cursor",e.cursor)},stop:function(){var t=b(this).data("draggable").options;t._cursor&&b("body").css("cursor",t._cursor)}}),b.ui.plugin.add("draggable","iframeFix",{start:function(){var t=b(this).data("draggable").options;b(!0===t.iframeFix?"iframe":t.iframeFix).each(function(){b('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(b(this).offset()).appendTo("body")})},stop:function(){b("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)})}}),b.ui.plugin.add("draggable","opacity",{start:function(t,e){t=b(e.helper),e=b(this).data("draggable").options,t.css("opacity")&&(e._opacity=t.css("opacity")),t.css("opacity",e.opacity)},stop:function(t,e){(t=b(this).data("draggable").options)._opacity&&b(e.helper).css("opacity",t._opacity)}}),b.ui.plugin.add("draggable","scroll",{start:function(){var t=b(this).data("draggable");t.scrollParent[0]!=document&&"HTML"!=t.scrollParent[0].tagName&&(t.overflowOffset=t.scrollParent.offset())},drag:function(t){var e=b(this).data("draggable"),i=e.options,n=!1;e.scrollParent[0]!=document&&"HTML"!=e.scrollParent[0].tagName?(i.axis&&"x"==i.axis||(e.overflowOffset.top+e.scrollParent[0].offsetHeight-t.pageY<i.scrollSensitivity?e.scrollParent[0].scrollTop=n=e.scrollParent[0].scrollTop+i.scrollSpeed:t.pageY-e.overflowOffset.top<i.scrollSensitivity&&(e.scrollParent[0].scrollTop=n=e.scrollParent[0].scrollTop-i.scrollSpeed)),i.axis&&"y"==i.axis||(e.overflowOffset.left+e.scrollParent[0].offsetWidth-t.pageX<i.scrollSensitivity?e.scrollParent[0].scrollLeft=n=e.scrollParent[0].scrollLeft+i.scrollSpeed:t.pageX-e.overflowOffset.left<i.scrollSensitivity&&(e.scrollParent[0].scrollLeft=n=e.scrollParent[0].scrollLeft-i.scrollSpeed))):(i.axis&&"x"==i.axis||(t.pageY-b(document).scrollTop()<i.scrollSensitivity?n=b(document).scrollTop(b(document).scrollTop()-i.scrollSpeed):b(window).height()-(t.pageY-b(document).scrollTop())<i.scrollSensitivity&&(n=b(document).scrollTop(b(document).scrollTop()+i.scrollSpeed))),i.axis&&"y"==i.axis||(t.pageX-b(document).scrollLeft()<i.scrollSensitivity?n=b(document).scrollLeft(b(document).scrollLeft()-i.scrollSpeed):b(window).width()-(t.pageX-b(document).scrollLeft())<i.scrollSensitivity&&(n=b(document).scrollLeft(b(document).scrollLeft()+i.scrollSpeed)))),!1!==n&&b.ui.ddmanager&&!i.dropBehaviour&&b.ui.ddmanager.prepareOffsets(e,t)}}),b.ui.plugin.add("draggable","snap",{start:function(){var i=b(this).data("draggable"),t=i.options;i.snapElements=[],b(t.snap.constructor!=String?t.snap.items||":data(draggable)":t.snap).each(function(){var t=b(this),e=t.offset();this!=i.element[0]&&i.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:e.top,left:e.left})})},drag:function(t,e){for(var i=b(this).data("draggable"),n=i.options,o=n.snapTolerance,s=e.offset.left,a=s+i.helperProportions.width,r=e.offset.top,l=r+i.helperProportions.height,c=i.snapElements.length-1;0<=c;c--){var d,h,f,u,p,g=i.snapElements[c].left,m=g+i.snapElements[c].width,v=i.snapElements[c].top,_=v+i.snapElements[c].height;g-o<s&&s<m+o&&v-o<r&&r<_+o||g-o<s&&s<m+o&&v-o<l&&l<_+o||g-o<a&&a<m+o&&v-o<r&&r<_+o||g-o<a&&a<m+o&&v-o<l&&l<_+o?("inner"!=n.snapMode&&(d=Math.abs(v-l)<=o,h=Math.abs(_-r)<=o,f=Math.abs(g-a)<=o,u=Math.abs(m-s)<=o,d&&(e.position.top=i._convertPositionTo("relative",{top:v-i.helperProportions.height,left:0}).top-i.margins.top),h&&(e.position.top=i._convertPositionTo("relative",{top:_,left:0}).top-i.margins.top),f&&(e.position.left=i._convertPositionTo("relative",{top:0,left:g-i.helperProportions.width}).left-i.margins.left),u&&(e.position.left=i._convertPositionTo("relative",{top:0,left:m}).left-i.margins.left)),p=d||h||f||u,"outer"!=n.snapMode&&(d=Math.abs(v-r)<=o,h=Math.abs(_-l)<=o,f=Math.abs(g-s)<=o,u=Math.abs(m-a)<=o,d&&(e.position.top=i._convertPositionTo("relative",{top:v,left:0}).top-i.margins.top),h&&(e.position.top=i._convertPositionTo("relative",{top:_-i.helperProportions.height,left:0}).top-i.margins.top),f&&(e.position.left=i._convertPositionTo("relative",{top:0,left:g}).left-i.margins.left),u&&(e.position.left=i._convertPositionTo("relative",{top:0,left:m-i.helperProportions.width}).left-i.margins.left)),!i.snapElements[c].snapping&&(d||h||f||u||p)&&i.options.snap.snap&&i.options.snap.snap.call(i.element,t,b.extend(i._uiHash(),{snapItem:i.snapElements[c].item})),i.snapElements[c].snapping=d||h||f||u||p):(i.snapElements[c].snapping&&i.options.snap.release&&i.options.snap.release.call(i.element,t,b.extend(i._uiHash(),{snapItem:i.snapElements[c].item})),i.snapElements[c].snapping=!1)}}}),b.ui.plugin.add("draggable","stack",{start:function(){var e,t=b(this).data("draggable").options;(t=b.makeArray(b(t.stack)).sort(function(t,e){return(parseInt(b(t).css("zIndex"),10)||0)-(parseInt(b(e).css("zIndex"),10)||0)})).length&&(e=parseInt(t[0].style.zIndex)||0,b(t).each(function(t){this.style.zIndex=e+t}),this[0].style.zIndex=e+t.length)}}),b.ui.plugin.add("draggable","zIndex",{start:function(t,e){t=b(e.helper),e=b(this).data("draggable").options,t.css("zIndex")&&(e._zIndex=t.css("zIndex")),t.css("zIndex",e.zIndex)},stop:function(t,e){(t=b(this).data("draggable").options)._zIndex&&b(e.helper).css("zIndex",t._zIndex)}})}(jQuery),function(h){h.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var t=this.options,e=t.accept;this.isover=0,this.isout=1,this.accept=h.isFunction(e)?e:function(t){return t.is(e)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},h.ui.ddmanager.droppables[t.scope]=h.ui.ddmanager.droppables[t.scope]||[],h.ui.ddmanager.droppables[t.scope].push(this),t.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){for(var t=h.ui.ddmanager.droppables[this.options.scope],e=0;e<t.length;e++)t[e]==this&&t.splice(e,1);return this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable"),this},_setOption:function(t,e){"accept"==t&&(this.accept=h.isFunction(e)?e:function(t){return t.is(e)}),h.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var e=h.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),e&&this._trigger("activate",t,this.ui(e))},_deactivate:function(t){var e=h.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),e&&this._trigger("deactivate",t,this.ui(e))},_over:function(t){var e=h.ui.ddmanager.current;e&&(e.currentItem||e.element)[0]!=this.element[0]&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(e)))},_out:function(t){var e=h.ui.ddmanager.current;e&&(e.currentItem||e.element)[0]!=this.element[0]&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(e)))},_drop:function(t,e){var i=e||h.ui.ddmanager.current;if(!i||(i.currentItem||i.element)[0]==this.element[0])return!1;var n=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var t=h.data(this,"droppable");if(t.options.greedy&&!t.options.disabled&&t.options.scope==i.options.scope&&t.accept.call(t.element[0],i.currentItem||i.element)&&h.ui.intersect(i,h.extend(t,{offset:t.element.offset()}),t.options.tolerance))return!(n=!0)}),!n&&(!!this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(i)),this.element))},ui:function(t){return{draggable:t.currentItem||t.element,helper:t.helper,position:t.position,offset:t.positionAbs}}}),h.extend(h.ui.droppable,{version:"1.8.2"}),h.ui.intersect=function(t,e,i){if(!e.offset)return!1;var n=(t.positionAbs||t.position.absolute).left,o=n+t.helperProportions.width,s=(t.positionAbs||t.position.absolute).top,a=s+t.helperProportions.height,r=e.offset.left,l=r+e.proportions.width,c=e.offset.top,d=c+e.proportions.height;switch(i){case"fit":return r<n&&o<l&&c<s&&a<d;case"intersect":return r<n+t.helperProportions.width/2&&o-t.helperProportions.width/2<l&&c<s+t.helperProportions.height/2&&a-t.helperProportions.height/2<d;case"pointer":return h.ui.isOver((t.positionAbs||t.position.absolute).top+(t.clickOffset||t.offset.click).top,(t.positionAbs||t.position.absolute).left+(t.clickOffset||t.offset.click).left,c,r,e.proportions.height,e.proportions.width);case"touch":return(c<=s&&s<=d||c<=a&&a<=d||s<c&&d<a)&&(r<=n&&n<=l||r<=o&&o<=l||n<r&&l<o);default:return!1}},h.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(t,e){var i=h.ui.ddmanager.droppables[t.options.scope]||[],n=e?e.type:null,o=(t.currentItem||t.element).find(":data(droppable)").andSelf(),s=0;t:for(;s<i.length;s++)if(!(i[s].options.disabled||t&&!i[s].accept.call(i[s].element[0],t.currentItem||t.element))){for(var a=0;a<o.length;a++)if(o[a]==i[s].element[0]){i[s].proportions.height=0;continue t}i[s].visible="none"!=i[s].element.css("display"),i[s].visible&&(i[s].offset=i[s].element.offset(),i[s].proportions={width:i[s].element[0].offsetWidth,height:i[s].element[0].offsetHeight},"mousedown"==n&&i[s]._activate.call(i[s],e))}},drop:function(t,e){var i=!1;return h.each(h.ui.ddmanager.droppables[t.options.scope]||[],function(){this.options&&(!this.options.disabled&&this.visible&&h.ui.intersect(t,this,this.options.tolerance)&&(i=i||this._drop.call(this,e)),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,e)))}),i},drag:function(n,o){n.options.refreshPositions&&h.ui.ddmanager.prepareOffsets(n,o),h.each(h.ui.ddmanager.droppables[n.options.scope]||[],function(){var t,e,i;this.options.disabled||this.greedyChild||!this.visible||(t=(t=h.ui.intersect(n,this,this.options.tolerance))||1!=this.isover?t&&0==this.isover?"isover":null:"isout")&&(!this.options.greedy||(i=this.element.parents(":data(droppable):eq(0)")).length&&((e=h.data(i[0],"droppable")).greedyChild="isover"==t?1:0),e&&"isover"==t&&(e.isover=0,e.isout=1,e._out.call(e,o)),this[t]=1,this["isout"==t?"isover":"isout"]=0,this["isover"==t?"_over":"_out"].call(this,o),e&&"isout"==t&&(e.isout=0,e.isover=1,e._over.call(e,o)))})}}}(jQuery),function(f){f.widget("ui.sortable",f.ui.mouse,{widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3},_create:function(){var t=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=!!this.items.length&&("x"===t.axis||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display"))),this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},destroy:function(){f.Widget.prototype.destroy.call(this),this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var t=this.items.length-1;0<=t;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,e){"disabled"===t?(this.options[t]=e,this.widget()[e?"addClass":"removeClass"]("ui-sortable-disabled")):f.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,e){var i=this;if(this.reverting)return!1;if(this.options.disabled||"static"==this.options.type)return!1;this._refreshItems(t);var n=null,o=this;f(t.target).parents().each(function(){if(f.data(this,i.widgetName+"-item")==o)return n=f(this),!1});if(!(n=f.data(t.target,i.widgetName+"-item")==o?f(t.target):n))return!1;if(this.options.handle&&!e){var s=!1;if(f(this.options.handle,n).find("*").andSelf().each(function(){this==t.target&&(s=!0)}),!s)return!1}return this.currentItem=n,this._removeCurrentsFromItems(),!0},_mouseStart:function(t,e,i){var n=this.options;if((this.currentContainer=this).refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},f.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),n.containment&&this._setContainment(),n.cursor&&(f("body").css("cursor")&&(this._storedCursor=f("body").css("cursor")),f("body").css("cursor",n.cursor)),n.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",n.opacity)),n.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",n.zIndex)),this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!i)for(var o=this.containers.length-1;0<=o;o--)this.containers[o]._trigger("activate",t,this._uiHash(this));return f.ui.ddmanager&&(f.ui.ddmanager.current=this),f.ui.ddmanager&&!n.dropBehaviour&&f.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var e,i;this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(e=this.options,i=!1,this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<e.scrollSensitivity?this.scrollParent[0].scrollTop=i=this.scrollParent[0].scrollTop+e.scrollSpeed:t.pageY-this.overflowOffset.top<e.scrollSensitivity&&(this.scrollParent[0].scrollTop=i=this.scrollParent[0].scrollTop-e.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<e.scrollSensitivity?this.scrollParent[0].scrollLeft=i=this.scrollParent[0].scrollLeft+e.scrollSpeed:t.pageX-this.overflowOffset.left<e.scrollSensitivity&&(this.scrollParent[0].scrollLeft=i=this.scrollParent[0].scrollLeft-e.scrollSpeed)):(t.pageY-f(document).scrollTop()<e.scrollSensitivity?i=f(document).scrollTop(f(document).scrollTop()-e.scrollSpeed):f(window).height()-(t.pageY-f(document).scrollTop())<e.scrollSensitivity&&(i=f(document).scrollTop(f(document).scrollTop()+e.scrollSpeed)),t.pageX-f(document).scrollLeft()<e.scrollSensitivity?i=f(document).scrollLeft(f(document).scrollLeft()-e.scrollSpeed):f(window).width()-(t.pageX-f(document).scrollLeft())<e.scrollSensitivity&&(i=f(document).scrollLeft(f(document).scrollLeft()+e.scrollSpeed))),!1!==i&&f.ui.ddmanager&&!e.dropBehaviour&&f.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px");for(var n=this.items.length-1;0<=n;n--){var o=this.items[n],s=o.item[0],a=this._intersectsWithPointer(o);if(a&&(o.instance===this.currentContainer&&!(s==this.currentItem[0]||this.placeholder[1==a?"next":"prev"]()[0]==s||f.ui.contains(this.placeholder[0],s)||"semi-dynamic"==this.options.type&&f.ui.contains(this.element[0],s)))){if(this.direction=1==a?"down":"up","pointer"!=this.options.tolerance&&!this._intersectsWithSides(o))break;this._rearrange(t,o),this._trigger("change",t,this._uiHash());break}}return this._contactContainers(t),f.ui.ddmanager&&f.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,e){var i,n;if(t)return f.ui.ddmanager&&!this.options.dropBehaviour&&f.ui.ddmanager.drop(this,t),this.options.revert?(n=(i=this).placeholder.offset(),i.reverting=!0,f(this.helper).animate({left:n.left-this.offset.parent.left-i.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:n.top-this.offset.parent.top-i.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){i._clear(t)})):this._clear(t,e),!1},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"==this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;0<=t;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!=this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),f.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?f(this.domPosition.prev).after(this.currentItem):f(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var t=this._getItemsAsjQuery(e&&e.connected),i=[];return e=e||{},f(t).each(function(){var t=(f(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[-=_](.+)/);t&&i.push((e.key||t[1]+"[]")+"="+(e.key&&e.expression?t[1]:t[2]))}),!i.length&&e.key&&i.push(e.key+"="),i.join("&")},toArray:function(t){var e=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},e.each(function(){i.push(f(t.item||this).attr(t.attribute||"id")||"")}),i},_intersectsWith:function(t){var e=this.positionAbs.left,i=e+this.helperProportions.width,n=this.positionAbs.top,o=n+this.helperProportions.height,s=t.left,a=s+t.width,r=t.top,l=r+t.height,c=this.offset.click.top,d=this.offset.click.left;return"pointer"==this.options.tolerance||this.options.forcePointerForContainers||"pointer"!=this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?r<n+c&&n+c<l&&s<e+d&&e+d<a:s<e+this.helperProportions.width/2&&i-this.helperProportions.width/2<a&&r<n+this.helperProportions.height/2&&o-this.helperProportions.height/2<l},_intersectsWithPointer:function(t){var e="x"===this.options.axis||f.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),i="y"===this.options.axis||f.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),t=e&&i,e=this._getDragVerticalDirection(),i=this._getDragHorizontalDirection();return!!t&&(this.floating?i&&"right"==i||"down"==e?2:1:e&&("down"==e?2:1))},_intersectsWithSides:function(t){var e=f.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),i=f.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),n=this._getDragVerticalDirection(),t=this._getDragHorizontalDirection();return this.floating&&t?"right"==t&&i||"left"==t&&!i:n&&("down"==n&&e||"up"==n&&!e)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!=t&&(0<t?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!=t&&(0<t?"right":"left")},refresh:function(t){return this._refreshItems(t),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor==String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(t){var e=[],i=[],n=this._connectWith();if(n&&t)for(var o=n.length-1;0<=o;o--)for(var s=f(n[o]),a=s.length-1;0<=a;a--){var r=f.data(s[a],this.widgetName);r&&r!=this&&!r.options.disabled&&i.push([f.isFunction(r.options.items)?r.options.items.call(r.element):f(r.options.items,r.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),r])}i.push([f.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):f(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(o=i.length-1;0<=o;o--)i[o][0].each(function(){e.push(this)});return f(e)},_removeCurrentsFromItems:function(){for(var t=this.currentItem.find(":data("+this.widgetName+"-item)"),e=0;e<this.items.length;e++)for(var i=0;i<t.length;i++)t[i]==this.items[e].item[0]&&this.items.splice(e,1)},_refreshItems:function(t){this.items=[],this.containers=[this];var e=this.items,i=[[f.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):f(this.options.items,this.element),this]],n=this._connectWith();if(n&&this.ready)for(var o=n.length-1;0<=o;o--)for(var s=f(n[o]),a=s.length-1;0<=a;a--){var r=f.data(s[a],this.widgetName);r&&r!=this&&!r.options.disabled&&(i.push([f.isFunction(r.options.items)?r.options.items.call(r.element[0],t,{item:this.currentItem}):f(r.options.items,r.element),r]),this.containers.push(r))}for(o=i.length-1;0<=o;o--)for(var l=i[o][1],c=i[o][0],a=0,d=c.length;a<d;a++){var h=f(c[a]);h.data(this.widgetName+"-item",l),e.push({item:h,instance:l,width:0,height:0,left:0,top:0})}},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var e=this.items.length-1;0<=e;e--){var i,n=this.items[e];n.instance!=this.currentContainer&&this.currentContainer&&n.item[0]!=this.currentItem[0]||(i=this.options.toleranceElement?f(this.options.toleranceElement,n.item):n.item,t||(n.width=i.outerWidth(),n.height=i.outerHeight()),o=i.offset(),n.left=o.left,n.top=o.top)}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(e=this.containers.length-1;0<=e;e--){var o=this.containers[e].element.offset();this.containers[e].containerCache.left=o.left,this.containers[e].containerCache.top=o.top,this.containers[e].containerCache.width=this.containers[e].element.outerWidth(),this.containers[e].containerCache.height=this.containers[e].element.outerHeight()}return this},_createPlaceholder:function(t){var i,n=t||this,o=n.options;o.placeholder&&o.placeholder.constructor!=String||(i=o.placeholder,o.placeholder={element:function(){var t=f(document.createElement(n.currentItem[0].nodeName)).addClass(i||n.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return i||(t.style.visibility="hidden"),t},update:function(t,e){i&&!o.forcePlaceholderSize||(e.height()||e.height(n.currentItem.innerHeight()-parseInt(n.currentItem.css("paddingTop")||0,10)-parseInt(n.currentItem.css("paddingBottom")||0,10)),e.width()||e.width(n.currentItem.innerWidth()-parseInt(n.currentItem.css("paddingLeft")||0,10)-parseInt(n.currentItem.css("paddingRight")||0,10)))}}),n.placeholder=f(o.placeholder.element.call(n.element,n.currentItem)),n.currentItem.after(n.placeholder),o.placeholder.update(n,n.placeholder)},_contactContainers:function(t){for(var e=null,i=null,n=this.containers.length-1;0<=n;n--)f.ui.contains(this.currentItem[0],this.containers[n].element[0])||(this._intersectsWith(this.containers[n].containerCache)?e&&f.ui.contains(this.containers[n].element[0],e.element[0])||(e=this.containers[n],i=n):this.containers[n].containerCache.over&&(this.containers[n]._trigger("out",t,this._uiHash(this)),this.containers[n].containerCache.over=0));if(e)if(1===this.containers.length)this.containers[i]._trigger("over",t,this._uiHash(this)),this.containers[i].containerCache.over=1;else if(this.currentContainer!=this.containers[i]){for(var o,s=1e4,a=null,r=this.positionAbs[this.containers[i].floating?"left":"top"],l=this.items.length-1;0<=l;l--)f.ui.contains(this.containers[i].element[0],this.items[l].item[0])&&(o=this.containers[i].floating?this.items[l].item.offset().left:this.items[l].item.offset().top,Math.abs(o-r)<s&&(s=Math.abs(o-r),a=this.items[l],this.direction=0<o-r?"down":"up"));(a||this.options.dropOnEmpty)&&(this.currentContainer=this.containers[i],a?this._rearrange(t,a,null,!0):this._rearrange(t,null,this.containers[i].element,!0),this._trigger("change",t,this._uiHash()),this.containers[i]._trigger("change",t,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[i]._trigger("over",t,this._uiHash(this)),this.containers[i].containerCache.over=1)}},_createHelper:function(t){var e=this.options,t=f.isFunction(e.helper)?f(e.helper.apply(this.element[0],[t,this.currentItem])):"clone"==e.helper?this.currentItem.clone():this.currentItem;return t.parents("body").length||f("parent"!=e.appendTo?e.appendTo:this.currentItem[0].parentNode)[0].appendChild(t[0]),t[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),""!=t[0].style.width&&!e.forceHelperSize||t.width(this.currentItem.width()),""!=t[0].style.height&&!e.forceHelperSize||t.height(this.currentItem.height()),t},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),"left"in(t=f.isArray(t)?{left:+t[0],top:+t[1]||0}:t)&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&f.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),{top:(t=this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&f.browser.msie?{top:0,left:0}:t).top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!=this.cssPosition)return{top:0,left:0};var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,e,i=this.options;"parent"==i.containment&&(i.containment=this.helper[0].parentNode),"document"!=i.containment&&"window"!=i.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,f("document"==i.containment?document:window).width()-this.helperProportions.width-this.margins.left,(f("document"==i.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(i.containment)||(t=f(i.containment)[0],e=f(i.containment).offset(),i="hidden"!=f(t).css("overflow"),this.containment=[e.left+(parseInt(f(t).css("borderLeftWidth"),10)||0)+(parseInt(f(t).css("paddingLeft"),10)||0)-this.margins.left,e.top+(parseInt(f(t).css("borderTopWidth"),10)||0)+(parseInt(f(t).css("paddingTop"),10)||0)-this.margins.top,e.left+(i?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(f(t).css("borderLeftWidth"),10)||0)-(parseInt(f(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,e.top+(i?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(f(t).css("borderTopWidth"),10)||0)-(parseInt(f(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,e){e=e||this.position;var i="absolute"==t?1:-1,n=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&f.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),t=/(html|body)/i.test(n[0].tagName);return{top:e.top+this.offset.relative.top*i+this.offset.parent.top*i-(f.browser.safari&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():t?0:n.scrollTop())*i),left:e.left+this.offset.relative.left*i+this.offset.parent.left*i-(f.browser.safari&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():t?0:n.scrollLeft())*i)}},_generatePosition:function(t){var e=this.options,i="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&f.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,n=/(html|body)/i.test(i[0].tagName);"relative"!=this.cssPosition||this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset());var o=t.pageX,s=t.pageY;return this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(o=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(s=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(o=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(s=this.containment[3]+this.offset.click.top)),e.grid&&(t=this.originalPageY+Math.round((s-this.originalPageY)/e.grid[1])*e.grid[1],s=this.containment&&(t-this.offset.click.top<this.containment[1]||t-this.offset.click.top>this.containment[3])?t-this.offset.click.top<this.containment[1]?t+e.grid[1]:t-e.grid[1]:t,t=this.originalPageX+Math.round((o-this.originalPageX)/e.grid[0])*e.grid[0],o=this.containment&&(t-this.offset.click.left<this.containment[0]||t-this.offset.click.left>this.containment[2])?t-this.offset.click.left<this.containment[0]?t+e.grid[0]:t-e.grid[0]:t)),{top:s-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(f.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():n?0:i.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(f.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():n?0:i.scrollLeft())}},_rearrange:function(t,e,i,n){i?i[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"==this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var o=this,s=this.counter;window.setTimeout(function(){s==o.counter&&o.refreshPositions(!n)},0)},_clear:function(t,e){this.reverting=!1;var i=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]==this.currentItem[0]){for(var n in this._storedCSS)"auto"!=this._storedCSS[n]&&"static"!=this._storedCSS[n]||(this._storedCSS[n]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!e&&i.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev==this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent==this.currentItem.parent()[0]||e||i.push(function(t){this._trigger("update",t,this._uiHash())}),this!==this.currentContainer&&(e||(i.push(function(t){this._trigger("remove",t,this._uiHash())}),i.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),i.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer))));for(n=this.containers.length-1;0<=n;n--)e||i.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[n])),this.containers[n].containerCache.over&&(i.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[n])),this.containers[n].containerCache.over=0);if(this._storedCursor&&f("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"==this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!e){this._trigger("beforeStop",t,this._uiHash());for(n=0;n<i.length;n++)i[n].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1}if(e||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null,!e){for(n=0;n<i.length;n++)i[n].call(this,t);this._trigger("stop",t,this._uiHash())}return!(this.fromOutside=!1)},_trigger:function(){!1===f.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(t){var e=t||this;return{helper:e.helper,placeholder:e.placeholder||f([]),position:e.position,originalPosition:e.originalPosition,offset:e.positionAbs,item:e.currentItem,sender:t?t.element:null}}}),f.extend(f.ui.sortable,{version:"1.8.24"})}(jQuery),function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):t(window.jQuery)}(function(r){"use strict";var e=0;r.ajaxTransport("iframe",function(o){var s,a;if(o.async&&("POST"===o.type||"GET"===o.type))return{send:function(t,n){s=r('<form style="display:none;"></form>'),a=r('<iframe src="javascript:false;" name="iframe-transport-'+(e+=1)+'"></iframe>').bind("load",function(){var i,e=r.isArray(o.paramName)?o.paramName:[o.paramName];a.unbind("load").bind("load",function(){var e;try{if(!(e=a.contents()).length||!e[0].firstChild)throw new Error}catch(t){e=void 0}n(200,"success",{iframe:e}),r('<iframe src="javascript:false;"></iframe>').appendTo(s),s.remove()}),s.prop("target",a.prop("name")).prop("action",o.url).prop("method",o.type),o.formData&&r.each(o.formData,function(t,e){r('<input type="hidden"/>').prop("name",e.name).val(e.value).appendTo(s)}),o.fileInput&&o.fileInput.length&&"POST"===o.type&&(i=o.fileInput.clone(),o.fileInput.after(function(t){return i[t]}),o.paramName&&o.fileInput.each(function(t){r(this).prop("name",e[t]||o.paramName)}),s.append(o.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data")),s.submit(),i&&i.length&&o.fileInput.each(function(t,e){t=r(i[t]);r(e).prop("name",t.prop("name")),t.replaceWith(e)})}),s.append(a).appendTo(document.body)},abort:function(){a&&a.unbind("load").prop("src","javascript".concat(":false;")),s&&s.remove()}}}),r.ajaxSetup({converters:{"iframe text":function(t){return r(t[0].body).text()},"iframe json":function(t){return r.parseJSON(r(t[0].body).text())},"iframe html":function(t){return r(t[0].body).html()},"iframe script":function(t){return r.globalEval(r(t[0].body).text())}}})}),function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery","jquery.ui.widget"],t):t(window.jQuery)}(function(h){"use strict";h.support.xhrFileUpload=!(!window.XMLHttpRequestUpload||!window.FileReader),h.support.xhrFormDataFileUpload=!!window.FormData,h.widget("blueimp.fileupload",{options:{namespace:void 0,dropZone:h(document),fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,formData:function(t){return t.serializeArray()},add:function(t,e){e.submit()},processData:!1,contentType:!1,cache:!1},_refreshOptionsList:["namespace","dropZone","fileInput","multipart","forceIframeTransport"],_BitrateTimer:function(){this.timestamp=+new Date,this.loaded=0,this.bitrate=0,this.getBitrate=function(t,e,i){var n=t-this.timestamp;return this.bitrate&&i&&!(i<n)||(this.bitrate=(e-this.loaded)*(1e3/n)*8,this.loaded=e,this.timestamp=t),this.bitrate}},_isXHRUpload:function(t){return!t.forceIframeTransport&&(!t.multipart&&h.support.xhrFileUpload||h.support.xhrFormDataFileUpload)},_getFormData:function(t){var i;return"function"==typeof t.formData?t.formData(t.form):h.isArray(t.formData)?t.formData:t.formData?(i=[],h.each(t.formData,function(t,e){i.push({name:t,value:e})}),i):[]},_getTotal:function(t){var i=0;return h.each(t,function(t,e){i+=e.size||1}),i},_onProgress:function(t,e){var i,n,o;t.lengthComputable&&(i=+new Date,e._time&&e.progressInterval&&i-e._time<e.progressInterval&&t.loaded!==t.total||(e._time=i,n=e.total||this._getTotal(e.files),o=parseInt(t.loaded/t.total*(e.chunkSize||n),10)+(e.uploadedBytes||0),this._loaded+=o-(e.loaded||e.uploadedBytes||0),e.lengthComputable=!0,e.loaded=o,e.total=n,e.bitrate=e._bitrateTimer.getBitrate(i,o,e.bitrateInterval),this._trigger("progress",t,e),this._trigger("progressall",t,{lengthComputable:!0,loaded:this._loaded,total:this._total,bitrate:this._bitrateTimer.getBitrate(i,this._loaded,e.bitrateInterval)})))},_initProgressListener:function(i){var n=this,t=(i.xhr?i:h.ajaxSettings).xhr();t.upload&&(h(t.upload).bind("progress",function(t){var e=t.originalEvent;t.lengthComputable=e.lengthComputable,t.loaded=e.loaded,t.total=e.total,n._onProgress(t,i)}),i.xhr=function(){return t})},_initXHRData:function(i){var n,t=i.files[0],e=i.multipart||!h.support.xhrFileUpload,o=i.paramName[0];e&&!i.blob||(i.headers=h.extend(i.headers,{"X-File-Name":t.name,"X-File-Type":t.type,"X-File-Size":t.size}),i.blob?e||(i.contentType="application/octet-stream",i.data=i.blob):(i.contentType=t.type,i.data=t)),e&&h.support.xhrFormDataFileUpload&&(i.postMessage?(n=this._getFormData(i),i.blob?n.push({name:o,value:i.blob}):h.each(i.files,function(t,e){n.push({name:i.paramName[t]||o,value:e})})):(i.formData instanceof FormData?n=i.formData:(n=new FormData,h.each(this._getFormData(i),function(t,e){n.append(e.name,e.value)})),i.blob?n.append(o,i.blob,t.name):h.each(i.files,function(t,e){e instanceof Blob&&n.append(i.paramName[t]||o,e,e.name)})),i.data=n),i.blob=null},_initIframeSettings:function(t){t.dataType="iframe "+(t.dataType||""),t.formData=this._getFormData(t),t.redirect&&h("<a></a>").prop("href",t.url).prop("host")!==location.host&&t.formData.push({name:t.redirectParamName||"redirect",value:t.redirect})},_initDataSettings:function(t){this._isXHRUpload(t)?(this._chunkedUpload(t,!0)||(t.data||this._initXHRData(t),this._initProgressListener(t)),t.postMessage&&(t.dataType="postmessage "+(t.dataType||""))):this._initIframeSettings(t,"iframe")},_getParamName:function(t){var e=h(t.fileInput),n=t.paramName;return n?h.isArray(n)||(n=[n]):(n=[],e.each(function(){for(var t=h(this),e=t.prop("name")||"files[]",i=(t.prop("files")||[1]).length;i;)n.push(e),--i}),n.length||(n=[e.prop("name")||"files[]"])),n},_initFormSettings:function(t){t.form&&t.form.length||(t.form=h(t.fileInput.prop("form"))),t.paramName=this._getParamName(t),t.url||(t.url=t.form.prop("action")||location.href),t.type=(t.type||t.form.prop("method")||"").toUpperCase(),"POST"!==t.type&&"PUT"!==t.type&&(t.type="POST")},_getAJAXSettings:function(t){t=h.extend({},this.options,t);return this._initFormSettings(t),this._initDataSettings(t),t},_enhancePromise:function(t){return t.success=t.done,t.error=t.fail,t.complete=t.always,t},_getXHRPromise:function(t,e,i){var n=h.Deferred(),o=n.promise();return e=e||this.options.context||o,!0===t?n.resolveWith(e,i):!1===t&&n.rejectWith(e,i),o.abort=n.promise,this._enhancePromise(o)},_chunkedUpload:function(i,t){var n,o,s=this,a=i.files[0],e=a.size,r=i.uploadedBytes=i.uploadedBytes||0,l=i.maxChunkSize||e,c=a.webkitSlice||a.mozSlice||a.slice;return!(!(this._isXHRUpload(i)&&c&&(r||l<e))||i.data)&&(!!t||(e<=r?(a.error="uploadedBytes",this._getXHRPromise(!1,i.context,[null,"error",a.error])):(e=Math.ceil((e-r)/l),(e=(n=function(e){return e?n(--e).pipe(function(){var t=h.extend({},i);return t.blob=c.call(a,r+e*l,r+(e+1)*l),t.chunkSize=t.blob.size,s._initXHRData(t),s._initProgressListener(t),o=(h.ajax(t)||s._getXHRPromise(!1,t.context)).done(function(){t.loaded||s._onProgress(h.Event("progress",{lengthComputable:!0,loaded:t.chunkSize,total:t.chunkSize}),t),i.uploadedBytes=t.uploadedBytes+=t.chunkSize})}):s._getXHRPromise(!0,i.context)})(e)).abort=function(){return o.abort()},this._enhancePromise(e))))},_beforeSend:function(t,e){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer),this._active+=1,this._loaded+=e.uploadedBytes||0,this._total+=this._getTotal(e.files)},_onDone:function(t,e,i,n){this._isXHRUpload(n)||this._onProgress(h.Event("progress",{lengthComputable:!0,loaded:1,total:1}),n),n.result=t,n.textStatus=e,n.jqXHR=i,this._trigger("done",null,n)},_onFail:function(t,e,i,n){n.jqXHR=t,n.textStatus=e,n.errorThrown=i,this._trigger("fail",null,n),n.recalculateProgress&&(this._loaded-=n.loaded||n.uploadedBytes||0,this._total-=n.total||this._getTotal(n.files))},_onAlways:function(t,e,i,n){--this._active,n.textStatus=e,i&&i.always?(n.jqXHR=i,n.result=t):(n.jqXHR=t,n.errorThrown=i),this._trigger("always",null,n),0===this._active&&(this._trigger("stop"),this._loaded=this._total=0,this._bitrateTimer=null)},_onSend:function(i,t){function e(t,e){return s._sending+=1,a._bitrateTimer=new s._BitrateTimer,n=n||(!1!==t&&!1!==s._trigger("send",i,a)&&(s._chunkedUpload(a)||h.ajax(a))||s._getXHRPromise(!1,a.context,e)).done(function(t,e,i){s._onDone(t,e,i,a)}).fail(function(t,e,i){s._onFail(t,e,i,a)}).always(function(t,e,i){if(--s._sending,s._onAlways(t,e,i,a),a.limitConcurrentUploads&&a.limitConcurrentUploads>s._sending)for(var n=s._slots.shift();n;){if(!n.isRejected()){n.resolve();break}n=s._slots.shift()}})}var n,o,s=this,a=s._getAJAXSettings(t);return this._beforeSend(i,a),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?((t=1<this.options.limitConcurrentUploads?(o=h.Deferred(),this._slots.push(o),o.pipe(e)):this._sequence=this._sequence.pipe(e,e)).abort=function(){var t=[void 0,"abort","abort"];return n?n.abort():(o&&o.rejectWith(t),e(!1,t))},this._enhancePromise(t)):e()},_onAdd:function(n,o){var s,t,a,e,r=this,l=!0,i=h.extend({},this.options,o),c=i.limitMultiFileUploads,d=this._getParamName(i);if((i.singleFileUploads||c)&&this._isXHRUpload(i))if(!i.singleFileUploads&&c)for(a=[],s=[],e=0;e<o.files.length;e+=c)a.push(o.files.slice(e,e+c)),(t=d.slice(e,e+c)).length||(t=d),s.push(t);else s=d;else a=[o.files],s=[d];return o.originalFiles=o.files,h.each(a||o.files,function(t,e){var i=h.extend({},o);return i.files=a?e:[e],i.paramName=s[t],i.submit=function(){return i.jqXHR=this.jqXHR=!1!==r._trigger("submit",n,this)&&r._onSend(n,this),this.jqXHR},l=r._trigger("add",n,i)}),l},_normalizeFile:function(t,e){void 0===e.name&&void 0===e.size&&(e.name=e.fileName,e.size=e.fileSize)},_replaceFileInput:function(i){var n=i.clone(!0);h("<form></form>").append(n)[0].reset(),i.after(n).detach(),h.cleanData(i.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(t,e){return e===i[0]?n[0]:e}),i[0]===this.element[0]&&(this.element=n)},_onChange:function(t){var e=t.data.fileupload,i={files:h.each(h.makeArray(t.target.files),e._normalizeFile),fileInput:h(t.target),form:h(t.target.form)};if(i.files.length||(i.files=[{name:t.target.value.replace(/^.*\\/,"")}]),e.options.replaceFileInput&&e._replaceFileInput(i.fileInput),!1===e._trigger("change",t,i)||!1===e._onAdd(t,i))return!1},_onPaste:function(t){var e=t.data.fileupload,i=t.originalEvent.clipboardData,i=i&&i.items||[],n={files:[]};if(h.each(i,function(t,e){e=e.getAsFile&&e.getAsFile();e&&n.files.push(e)}),!1===e._trigger("paste",t,n)||!1===e._onAdd(t,n))return!1},_onDrop:function(t){var e=t.data.fileupload,i=t.dataTransfer=t.originalEvent.dataTransfer,i={files:h.each(h.makeArray(i&&i.files),e._normalizeFile)};if(!1===e._trigger("drop",t,i)||!1===e._onAdd(t,i))return!1;t.preventDefault()},_onDragOver:function(t){var e=t.data.fileupload,i=t.dataTransfer=t.originalEvent.dataTransfer;if(!1===e._trigger("dragover",t))return!1;i&&(i.dropEffect="copy"),t.preventDefault()},_initEventHandlers:function(){var t=this.options.namespace;this._isXHRUpload(this.options)&&this.options.dropZone.bind("dragover."+t,{fileupload:this},this._onDragOver).bind("drop."+t,{fileupload:this},this._onDrop).bind("paste."+t,{fileupload:this},this._onPaste),this.options.fileInput.bind("change."+t,{fileupload:this},this._onChange)},_destroyEventHandlers:function(){var t=this.options.namespace;this.options.dropZone.unbind("dragover."+t,this._onDragOver).unbind("drop."+t,this._onDrop).unbind("paste."+t,this._onPaste),this.options.fileInput.unbind("change."+t,this._onChange)},_setOption:function(t,e){var i=-1!==h.inArray(t,this._refreshOptionsList);i&&this._destroyEventHandlers(),h.Widget.prototype._setOption.call(this,t,e),i&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var t=this.options;void 0===t.fileInput?t.fileInput=this.element.is("input:file")?this.element:this.element.find("input:file"):t.fileInput instanceof h||(t.fileInput=h(t.fileInput)),t.dropZone instanceof h||(t.dropZone=h(t.dropZone))},_create:function(){var t=this.options;h.extend(t,h(this.element[0].cloneNode(!1)).data()),t.namespace=t.namespace||this.widgetName,this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=this._loaded=this._total=0,this._initEventHandlers()},destroy:function(){this._destroyEventHandlers(),h.Widget.prototype.destroy.call(this)},enable:function(){h.Widget.prototype.enable.call(this),this._initEventHandlers()},disable:function(){this._destroyEventHandlers(),h.Widget.prototype.disable.call(this)},add:function(t){t&&!this.options.disabled&&(t.files=h.each(h.makeArray(t.files),this._normalizeFile),this._onAdd(null,t))},send:function(t){return t&&!this.options.disabled&&(t.files=h.each(h.makeArray(t.files),this._normalizeFile),t.files.length)?this._onSend(null,t):this._getXHRPromise(!1,t&&t.context)}})}),function(a){var s=new Array,r=new Array;a.fn.doAutosize=function(t){var e=a(this).data("minwidth"),i=a(this).data("maxwidth"),n="",o=a(this),s=a("#"+a(this).data("tester_id"));n!==(n=o.val())&&(n=n.replace(/&/g,"&").replace(/\s/g," ").replace(/</g,"<").replace(/>/g,">"),s.html(n),((t=(s=s.width())+t.comfortZone>=e?s+t.comfortZone:e)<o.width()&&e<=t||e<t&&t<i)&&o.width(t))},a.fn.resetAutosize=function(t){var e=a(this).data("minwidth")||t.minInputWidth||a(this).width(),i=a(this).data("maxwidth")||t.maxInputWidth||a(this).closest(".tagsinput").width()-t.inputPadding,n=a(this),o=a("<tester/>").css({position:"absolute",top:-9999,left:-9999,width:"auto",fontSize:n.css("fontSize"),fontFamily:n.css("fontFamily"),fontWeight:n.css("fontWeight"),letterSpacing:n.css("letterSpacing"),whiteSpace:"nowrap"}),t=a(this).attr("id")+"_autosize_tester";0<!a("#"+t).length&&(o.attr("id",t),o.appendTo("body")),n.data("minwidth",e),n.data("maxwidth",i),n.data("tester_id",t),n.css("width",e)},a.fn.addTag=function(n,o){return o=jQuery.extend({focus:!1,callback:!0},o),this.each(function(){var t,e=a(this).attr("id"),i=a(this).val().split(s[e]);""==i[0]&&(i=new Array),n=jQuery.trim(n),o.unique?1==(t=a(i).tagExist(n))&&a("#"+e+"_tag").addClass("not_valid"):t=!1,""!=n&&1!=t&&(a("<span>").addClass("tag").append(a("<span>").text(n).append(""),a("<a>",{href:"#",title:"Removing tag",text:"x"}).click(function(){return a("#"+e).removeTag(escape(n))})).insertBefore("#"+e+"_addTag"),i.push(n),a("#"+e+"_tag").val(""),o.focus?a("#"+e+"_tag").focus():a("#"+e+"_tag").blur(),a.fn.tagsInput.updateTagsField(this,i),o.callback&&r[e]&&r[e].onAddTag&&r[e].onAddTag.call(this,n),r[e]&&r[e].onChange&&(t=i.length,r[e].onChange.call(this,a(this),i[t-1])))}),!1},a.fn.removeTag=function(n){return n=unescape(n),this.each(function(){var t=a(this).attr("id"),e=a(this).val().split(s[t]);a("#"+t+"_tagsinput .tag").remove(),str="";for(var i=0;i<e.length;i++)e[i]!=n&&(str=str+s[t]+e[i]);a.fn.tagsInput.importTags(this,str),r[t]&&r[t].onRemoveTag&&r[t].onRemoveTag.call(this,n)}),!1},a.fn.tagExist=function(t){return 0<=jQuery.inArray(t,a(this))},a.fn.importTags=function(t){id=a(this).attr("id"),a("#"+id+"_tagsinput .tag").remove(),a.fn.tagsInput.importTags(this,t)},a.fn.tagsInput=function(t){var o=jQuery.extend({interactive:!0,defaultText:"add a tag",minChars:0,width:"300px",height:"100px",autocomplete:{selectFirst:!1},hide:!0,delimiter:",",unique:!0,removeWithBackspace:!0,placeholderColor:"#666666",autosize:!0,comfortZone:20,inputPadding:12},t);return this.each(function(){o.hide&&a(this).hide();var n=a(this).attr("id"),t=jQuery.extend({pid:n,real_input:"#"+n,holder:"#"+n+"_tagsinput",input_wrapper:"#"+n+"_addTag",fake_input:"#"+n+"_tag"},o);s[n]=t.delimiter,(o.onAddTag||o.onRemoveTag||o.onChange)&&(r[n]=new Array,r[n].onAddTag=o.onAddTag,r[n].onRemoveTag=o.onRemoveTag,r[n].onChange=o.onChange);var e='<div id="'+n+'_tagsinput" class="tagsinput"><div id="'+n+'_addTag">';if(o.interactive&&(e=e+'<input id="'+n+'_tag" value="" data-default="'+o.defaultText+'" />'),a(e+='</div><div class="tags_clear"></div></div>').insertAfter(this),a(t.holder).css("width",o.width),a(t.holder).css("height",o.height),""!=a(t.real_input).val()&&a.fn.tagsInput.importTags(a(t.real_input),a(t.real_input).val()),o.interactive){if(a(t.fake_input).val(a(t.fake_input).attr("data-default")),a(t.fake_input).css("color",o.placeholderColor),a(t.fake_input).resetAutosize(o),a(t.holder).bind("click",t,function(t){a(t.data.fake_input).focus()}),a(t.fake_input).bind("focus",t,function(t){a(t.data.fake_input).val()==a(t.data.fake_input).attr("data-default")&&a(t.data.fake_input).val(""),a(t.data.fake_input).css("color","#000000")}),null!=o.autocomplete_url){for(attrname in autocomplete_options={source:o.autocomplete_url},o.autocomplete)autocomplete_options[attrname]=o.autocomplete[attrname];void 0!==jQuery.Autocompleter?(a(t.fake_input).autocomplete(o.autocomplete_url,o.autocomplete),a(t.fake_input).bind("result",t,function(t,e,i){e&&a("#"+n).addTag(e[0]+"",{focus:!0,unique:o.unique})})):void 0!==jQuery.ui.autocomplete&&(a(t.fake_input).autocomplete(autocomplete_options),a(t.fake_input).bind("autocompleteselect",t,function(t,e){return a(t.data.real_input).addTag(e.item.value,{focus:!0,unique:o.unique}),!1}))}else a(t.fake_input).bind("blur",t,function(t){var e=a(this).attr("data-default");return""!=a(t.data.fake_input).val()&&a(t.data.fake_input).val()!=e?t.data.minChars<=a(t.data.fake_input).val().length&&(!t.data.maxChars||t.data.maxChars>=a(t.data.fake_input).val().length)&&a(t.data.real_input).addTag(a(t.data.fake_input).val(),{focus:!0,unique:o.unique}):(a(t.data.fake_input).val(a(t.data.fake_input).attr("data-default")),a(t.data.fake_input).css("color",o.placeholderColor)),!1});a(t.fake_input).bind("keypress",t,function(t){return t.which==t.data.delimiter.charCodeAt(0)||13==t.which?(t.preventDefault(),t.data.minChars<=a(t.data.fake_input).val().length&&(!t.data.maxChars||t.data.maxChars>=a(t.data.fake_input).val().length)&&a(t.data.real_input).addTag(a(t.data.fake_input).val(),{focus:!0,unique:o.unique}),a(t.data.fake_input).resetAutosize(o),!1):void(t.data.autosize&&a(t.data.fake_input).doAutosize(o))}),t.removeWithBackspace&&a(t.fake_input).bind("keydown",function(t){var e;8==t.keyCode&&""==a(this).val()&&(t.preventDefault(),e=a(this).closest(".tagsinput").find(".tag:last").text(),t=a(this).attr("id").replace(/_tag$/,""),e=e.replace(/[\s]+x$/,""),a("#"+t).removeTag(escape(e)),a(this).trigger("focus"))}),a(t.fake_input).blur(),t.unique&&a(t.fake_input).keydown(function(t){8!=t.keyCode&&!String.fromCharCode(t.which).match(/\w+|[,\/]+/)||a(this).removeClass("not_valid")})}return!1}),this},a.fn.tagsInput.updateTagsField=function(t,e){var i=a(t).attr("id");a(t).val(e.join(s[i]))},a.fn.tagsInput.importTags=function(t,e){a(t).val("");for(var i=a(t).attr("id"),n=e.split(s[i]),o=0;o<n.length;o++)a(t).addTag(n[o],{focus:!1,callback:!1});r[i]&&r[i].onChange&&r[i].onChange.call(t,t,n[o])}}(jQuery),function(_){_.iButton={version:"1.0.03",setDefaults:function(t){_.extend(y,t)}},_.fn.iButton=function(t){var i,n="string"==typeof t&&t,o=n&&Array.prototype.slice.call(arguments,1)||arguments,s=0==this.length?null:_.data(this[0],"iButton");return s&&n&&this.length?"object"==n.toLowerCase()?s:s[n]?(this.each(function(t){var e=_.data(this,"iButton")[n].apply(s,o);if(0==t&&e){if(!e.jquery)return i=e,!1;i=_([]).add(e)}else e&&e.jquery&&(i=i.add(e))}),i||this):this:this.each(function(){new e(this,t)})};var b=0;_.browser.iphone=-1<navigator.userAgent.toLowerCase().indexOf("iphone");var e=function(t,n){var o,s,i,a,r,l,c,d,h=this,f=_(t),e=++b,u=!1,p={},g={dragging:!1,clicked:null},m={position:null,offset:null,time:null},t=(n=_.extend({},y,n,_.metadata?f.metadata():{})).labelOn==w&&n.labelOff==x,v=":checkbox, :radio";if(!f.is(v))return f.find(v).iButton(n);_.data(f[0],"iButton")||(_.data(f[0],"iButton",h),"auto"==n.resizeHandle&&(n.resizeHandle=!t),"auto"==n.resizeContainer&&(n.resizeContainer=!t),this.toggle=function(t){var e=0<arguments.length?t:!f[0].checked;f.attr("checked",e).trigger("change")},this.disable=function(t){var e=0<arguments.length?t:!u;u=e,f.attr("disabled",e),o[e?"addClass":"removeClass"](n.classDisabled),_.isFunction(n.disable)&&n.disable.apply(h,[u,f,n])},this.repaint=function(){c()},this.destroy=function(){_([f[0],o[0]]).unbind(".iButton"),_(document).unbind(".iButton_"+e),o.after(f).remove(),_.data(f[0],"iButton",null),_.isFunction(n.destroy)&&n.destroy.apply(h,[f,n])},f.wrap('<div class="'+_.trim(n.classContainer+" "+n.className)+'" />').after('<div class="'+n.classHandle+'"><div class="'+n.classHandleRight+'"><div class="'+n.classHandleMiddle+'" /></div></div><div class="'+n.classLabelOff+'"><span><label>'+n.labelOff+'</label></span></div><div class="'+n.classLabelOn+'"><span><label>'+n.labelOn+'</label></span></div><div class="'+n.classPaddingLeft+'"></div><div class="'+n.classPaddingRight+'"></div>'),o=f.parent(),s=f.siblings("."+n.classHandle),t=f.siblings("."+n.classLabelOff),i=t.children("span"),a=f.siblings("."+n.classLabelOn),r=a.children("span"),(n.resizeHandle||n.resizeContainer)&&(p.onspan=r.outerWidth(),p.offspan=i.outerWidth()),n.resizeHandle?(p.handle=Math.min(p.onspan,p.offspan),s.css("width",p.handle)):p.handle=s.width(),n.resizeContainer?(p.container=Math.max(p.onspan,p.offspan)+p.handle+20,o.css("width",p.container),t.css("width",p.container-5)):p.container=o.width(),l=p.container-p.handle-6,(c=function(t){var e=f[0].checked?l:0,t=!(0<arguments.length)||arguments[0];t&&n.enableFx?(s.stop().animate({left:e},n.duration,n.easing),a.stop().animate({width:e+4},n.duration,n.easing),r.stop().animate({marginLeft:e-l},n.duration,n.easing),i.stop().animate({marginRight:-e},n.duration,n.easing)):(s.css("left",e),a.css("width",e+4),r.css("marginLeft",e-l),i.css("marginRight",-e))})(!1),d=function(t){return t.pageX||(t.originalEvent.changedTouches?t.originalEvent.changedTouches[0].pageX:0)},o.bind("mousedown.iButton touchstart.iButton",function(t){if(!(_(t.target).is(v)||u||!n.allowRadioUncheck&&f.is(":radio:checked")))return t.preventDefault(),g.clicked=s,m.position=d(t),m.offset=m.position-(parseInt(s.css("left"),10)||0),m.time=(new Date).getTime(),!1}),n.enableDrag&&_(document).bind("mousemove.iButton_"+e+" touchmove.iButton_"+e,function(t){if(g.clicked==s){t.preventDefault();t=d(t);t!=m.offset&&(g.dragging=!0,o.addClass(n.classHandleActive));t=Math.min(1,Math.max(0,(t-m.offset)/l));return s.css("left",t*l),a.css("width",t*l+4),i.css("marginRight",-t*l),r.css("marginLeft",-(1-t)*l),!1}}),_(document).bind("mouseup.iButton_"+e+" touchend.iButton_"+e,function(t){if(g.clicked==s){t.preventDefault();var e,i=!0;return!g.dragging||(new Date).getTime()-m.time<n.clickOffset?(e=f[0].checked,f.attr("checked",!e),_.isFunction(n.click)&&n.click.apply(h,[!e,f,n])):(e=.5<=(d(t)-m.offset)/l,f[0].checked==e&&(i=!1),f.attr("checked",e)),o.removeClass(n.classHandleActive),g.clicked=null,g.dragging=null,i?f.trigger("change"):c(),!1}}),f.bind("change.iButton",function(){var t;c(),f.is(":radio")&&(t=f[0],_(t.form?t.form[t.name]:":radio[name="+t.name+"]").filter(":not(:checked)").iButton("repaint")),_.isFunction(n.change)&&n.change.apply(h,[f,n])}).bind("focus.iButton",function(){o.addClass(n.classFocus)}).bind("blur.iButton",function(){o.removeClass(n.classFocus)}),_.isFunction(n.click)&&f.bind("click.iButton",function(){n.click.apply(h,[f[0].checked,f,n])}),f.is(":disabled")&&this.disable(!0),_.browser.msie&&(o.find("*").andSelf().attr("unselectable","on"),f.bind("click.iButton",function(){f.triggerHandler("change.iButton")})),_.isFunction(n.init)&&n.init.apply(h,[f,n]))},y={duration:200,easing:"swing",labelOn:"ON",labelOff:"OFF",resizeHandle:"auto",resizeContainer:"auto",enableDrag:!0,enableFx:!0,allowRadioUncheck:!1,clickOffset:120,className:"",classContainer:"ibutton-container",classDisabled:"ibutton-disabled",classFocus:"ibutton-focus",classLabelOn:"ibutton-label-on",classLabelOff:"ibutton-label-off",classHandle:"ibutton-handle",classHandleMiddle:"ibutton-handle-middle",classHandleRight:"ibutton-handle-right",classHandleActive:"ibutton-active-handle",classPaddingLeft:"ibutton-padding-left",classPaddingRight:"ibutton-padding-right",init:null,change:null,click:null,disable:null,destroy:null},w=y.labelOn,x=y.labelOff}(jQuery),function(o){function s(t,e){this.path=t,null!=e?(this.at_2x_path=e,this.perform_check=!1):(this.at_2x_path=t.replace(/\.\w+$/,function(t){return"@2x"+t}),this.perform_check=!0)}function e(t){var e;/@2x\.\w+$/.test(o(t).attr("src"))||(this.el=t,this.path=new s(o(t).attr("src"),o(t).attr("data-at2x")),(e=this).path.check_2x_variant(function(t){t&&e.swap()}))}o.fn.retina=function(t){if(o.Retina.isRetina())return o.Retina.opts=o.extend(o.Retina.opts,t),this.each(function(){o(this).is("img")&&new e(this)})},o.Retina=function(){},o.Retina.opts={check_mime_type:!0,force_original_dimensions:!0},o.Retina.isRetina=function(){return!!(1<window.devicePixelRatio||window.matchMedia&&window.matchMedia("(-webkit-min-device-pixel-ratio: 1.5),(min--moz-device-pixel-ratio: 1.5),(-o-min-device-pixel-ratio: 3/2),(min-resolution: 1.5dppx)").matches)},s.confirmed_paths=[],s.prototype.is_external=function(){return!(!this.path.match(/^(https?\:|\/\/)/i)||this.path.match("//"+document.domain+"/"))},s.prototype.check_2x_variant=function(e){var i,n=this;if(this.is_external()||!this.perform_check&&void 0!==this.at_2x_path&&null!==this.at_2x_path||this.at_2x_path in s.confirmed_paths)return e(!0);(i=new XMLHttpRequest).open("HEAD",this.at_2x_path),i.onreadystatechange=function(){if(4==i.readyState&&200<=i.status&&i.status<=399){if(o.Retina.opts.check_mime_type){var t=i.getResponseHeader("Content-Type");if(null===t||!t.match(/^image/i))return e(!1)}return s.confirmed_paths.push(n.at_2x_path),e(!0)}return e(!1)},i.send()},(o.RetinaImage=e).prototype.swap=function(i){void 0===i&&(i=this.path.at_2x_path);var n=this;!function t(){var e;n.el.complete?(o.Retina.opts.force_original_dimensions&&(n.el.setAttribute("width",n.el.offsetWidth),n.el.setAttribute("height",n.el.offsetHeight)),e=n.el.src,n.el.setAttribute("src",i),o(n.el).one("error",function(){n.el.setAttribute("src",e)})):setTimeout(t,5)}()}}(jQuery),function(r,o,s){function l(e){var t={text:"",start:0,end:0};if(!e.value)return t;try{if(o.getSelection)t.start=e.selectionStart,t.end=e.selectionEnd,t.text=e.value.slice(t.start,t.end);else if(s.selection){e.focus();var i=s.selection.createRange(),n=s.body.createTextRange();t.text=i.text;try{n.moveToElementText(e),n.setEndPoint("StartToStart",i)}catch(t){(n=e.createTextRange()).setEndPoint("StartToStart",i)}t.start=e.value.length-n.text.length,t.end=t.start+i.text.length}}catch(t){}return t}var i={getPos:function(t){t=l(t);return{start:t.start,end:t.end}},setPos:function(t,e,i){"start"===(i=this._caretMode(i))?e.end=e.start:"end"===i&&(e.start=e.end),t.focus();try{var n;t.createTextRange?(n=t.createTextRange(),0<=o.navigator.userAgent.toLowerCase().indexOf("msie")&&(e.start=t.value.substr(0,e.start).replace(/\r/g,"").length,e.end=t.value.substr(0,e.end).replace(/\r/g,"").length),n.collapse(!0),n.moveStart("character",e.start),n.moveEnd("character",e.end-e.start),n.select()):t.setSelectionRange&&t.setSelectionRange(e.start,e.end)}catch(t){}},getText:function(t){return l(t).text},_caretMode:function(t){switch(t=!1===(t=t||"keep")?"end":t){case"keep":case"start":case"end":break;default:t="keep"}return t},replace:function(t,e,i){var n=l(t),o=t.value,s=r(t).scrollTop(),a={start:n.start,end:n.start+e.length};t.value=o.substr(0,n.start)+e+o.substr(n.end),r(t).scrollTop(s),this.setPos(t,a,i)},insertBefore:function(t,e,i){var n=l(t),o=t.value,s=r(t).scrollTop(),a={start:n.start+e.length,end:n.end+e.length};t.value=o.substr(0,n.start)+e+o.substr(n.start),r(t).scrollTop(s),this.setPos(t,a,i)},insertAfter:function(t,e,i){var n=l(t),o=t.value,s=r(t).scrollTop(),a={start:n.start,end:n.end};t.value=o.substr(0,n.end)+e+o.substr(n.end),r(t).scrollTop(s),this.setPos(t,a,i)}};r.extend({selection:function(t){t="text"===(t||"text").toLowerCase();try{if(o.getSelection){if(t)return o.getSelection().toString();var e,i=o.getSelection();return i.getRangeAt?e=i.getRangeAt(0):((e=s.createRange()).setStart(i.anchorNode,i.anchorOffset),e.setEnd(i.focusNode,i.focusOffset)),r("<div></div>").append(e.cloneContents()).html()}if(s.selection)return t?s.selection.createRange().text:s.selection.createRange().htmlText}catch(t){}return""}}),r.fn.extend({selection:function(t,e){switch(e=e||{},t){case"getPos":return i.getPos(this[0]);case"setPos":return this.each(function(){i.setPos(this,e)});case"replace":return this.each(function(){i.replace(this,e.text,e.caret)});case"insert":return this.each(function(){"before"===e.mode?i.insertBefore(this,e.text,e.caret):i.insertAfter(this,e.text,e.caret)});default:return i.getText(this[0])}return this}})}(jQuery,window,window.document),function(v){v.fn.inlineEditable=function(t,e){if(this.length){var d=!1;if("string"==typeof t)return"setOption"==t&&(h=this.data("inlineEditableSettings")||{},v.extend(!0,h,e),void 0!==e.hold&&"function"!=typeof e.hold&&(h.hold=n(h.hold)),this.data("inlineEditableSettings",h)),this;e=this.data("inlineEditableSettings");this.data("inlineEditableSettings",v.extend({inputType:"text",inputClass:"",size:{height:null,width:null},minSize:{height:null,width:null},maxSize:{height:null,width:null},editLink:null,editOnItself:!0,placeholder:null,makeReadableBy:["blur","enter","esc"],updateBy:["ctrl+enter","alt+enter"],beforeBackReadable:function(){},afterBackReadable:function(){},beforeMakeEditable:function(){},afterMakeEditable:function(){},placeholderClass:"hint",truncate:!1,hold:!1,html:!1,allowEmpty:!1},e,t||{}));var h=this.data("inlineEditableSettings")||{},f=this,u="read",p="";return"function"!=typeof h.hold&&(h.hold=n(h.hold)),function(){var t;this.data("inited")||(h.truncate&&"boolean"==typeof h.truncate&&(h.truncate=255),h.truncate&&(t=h.placeholder&&h.placeholder===this.text()?"":this.text(),this.data("real_text",t),this.text(t.length<h.truncate-3?t:t.substr(0,h.truncate-3)+"...")),h.placeholder&&o.call(this),h.editLink&&v(h.editLink).unbind("click.inlineEditable").bind("click.inlineEditable",function(){h.hold.call(f)||"edit"!=u&&i.call(f.get(0))}),h.editOnItself&&this.unbind("click.inlineEditable").bind("click.inlineEditable",function(){h.hold.call(f)||"edit"!=u&&i.call(this)}),this.unbind("editable.inlineEditable").bind("editable.inlineEditable",function(){h.hold.call(f)||"edit"!=u&&i.call(this)}),this.unbind("placeholder.inlineEditable").bind("placeholder.inlineEditable",function(t,e){e&&h.placeholder&&o.call(this),e||v(this).removeClass(h.placeholderClass)}),this.data("inited",!0))}.call(this),this}function o(){m(v(this))||v(this).addClass(h.placeholderClass).text(h.placeholder)}function i(){u="edit",this.id=this.id||(""+Math.random()).slice(2);var t,e,i,n=this.id+"-input",o=v("#"+n);if(o.length||(f.after((e=n,"textarea"!==h.inputType?'<input type="text" id="'+e+'" style="display:none;">':'<textarea id="'+e+'" style="display:none;"></textarea>')),o=v("#"+n)),o.addClass(h.inputClass),t=o,e=f,n=h.size.height||e.height(),e=h.size.width||1.5*e.width(),n=h.minSize.height&&n<h.minSize.height?h.minSize.height:n,e=h.minSize.width&&e<h.minSize.width?h.minSize.width:e,n=h.maxSize.height&&n>h.maxSize.height?h.maxSize.height:n,e=h.maxSize.width&&e>h.maxSize.width?h.maxSize.width:e,t.height(n),t.width(e),h.placeholder&&m(v(this))==h.placeholder&&function(){m(v(this))==h.placeholder&&v(this).text("").removeClass(h.placeholderClass)}.call(f),h.beforeMakeEditable.call(this,o),p=h.truncate?f.data("real_text"):m(f),o.val(p).show().focus(),f.hide(),v(h.editLink).hide(),!d){for(var s=[],a=[],r=0,l=h.makeReadableBy.length;r<l;++r)"blur"==(c=h.makeReadableBy[r])&&o.blur(function(){"read"!=u&&g.call(this)}),"enter"==c&&s.push(13),"esc"==c&&s.push(27);for(var c,r=0,l=h.updateBy.length;r<l;++r)"alt+enter"==(c=h.updateBy[r])&&a.push({ctrl:!1,alt:!0,shift:!1,key:13}),"ctrl+enter"==c&&a.push({ctrl:!0,alt:!1,shift:!1,key:13}),"ctrl+s"==c&&a.push({ctrl:!0,alt:!1,shift:!1,key:17});s.length&&(i=s,o.keydown(function(t){if(!~i.indexOf(t.keyCode)||t.ctrlKey||t.altKey||t.shiftKey||"read"!=u&&g.call(this,27==t.keyCode?p:null),a.length)for(var e in a){e=a[e];if(t.keyCode==e.key&&t.ctrlKey==e.ctrl&&t.altKey==e.alt&&t.shiftKey==e.shift){f.trigger("readable");break}}})),f.unbind("readable.inlineEditable").bind("readable.inlineEditable",function(t,e){var i;"read"!=u&&(i=this.id+"-input",i=v("#"+i),g.call(i,i.val(),e))}),d=!0}h.afterMakeEditable.call(this,o)}function g(t,e){var i,n;e=void 0!==e,null!=t?v(this).val(t):t=v(this).val(),!1===e&&!1===h.beforeBackReadable.call(f.get(0),this,{changed:t!=p,old_text:p,new_text:t})||(u="read",h.placeholder&&function(t){return!v(t).val()&&(v(this).text(h.placeholder).addClass(h.placeholderClass),!0)}.call(f,this)||(h.allowEmpty||t)&&(h.truncate?(f.data("real_text",t),f.text(t.length<h.truncate-3?t:t.substr(0,h.truncate-3)+"...")):(i=f,n=t,h.html?i.html(n):i.text(n)),t||o.call(this)),f.show(),v(this).hide(),v(h.editLink).show(),!1===e&&h.afterBackReadable.call(f.get(0),this,{changed:t!=p,old_text:p}))}function n(t){return function(){return t}}function m(t){return h.html?t.html():t.text()}}}(jQuery),function(r){r.fn.lazyLoad=function(t,e){var i,n,o,s;function a(){if(s.stopped)this.onscroll=null;else if(!s.stopped&&!s.loading&&o(n,i)<=s.distance){if(null!==s.hash){var t=location.hash.replace(/^[^#]*#\/*/,"").split("/")[0];if(-1===s.hash.indexOf(t))return void(this.onscroll=null)}s.load()}}"stop"!=t?"reload"!=t?"sleep"!=t?"wake"!=t?"force"!=t?(this.data("lazyLoadSettings",r.extend({distance:50,load:function(){},container:n,state:"wake",hash:location.hash.replace(/^[^#]*#\/*/,"").split("/")[0]||null,distanceBetweenBottoms:null},t||{})),(s=this.data("lazyLoadSettings")).loading=!1,s.stopped=!1,i=this,n=s.container,function(){null!==s.hash&&(r.isArray(s.hash)||(s.hash=[s.hash]));r.fn.lazyLoad.call(i,s.state),function(){var e=setTimeout(function(){if(s.stopped)clearTimeout(e);else{if(null!==s.hash){var t=location.hash.replace(/^[^#]*#\/*/,"").split("/")[0];if(-1===s.hash.indexOf(t))return void clearTimeout(e)}s.loading?e=setTimeout(arguments.callee,350):(o(n,i),o(n,i)<=s.distance?(s.load(),e=setTimeout(arguments.callee,350)):(i.get(0).onscroll=a,clearTimeout(e)))}},350)}()}(),o="function"==typeof s.distanceBetweenBottoms?s.distanceBetweenBottoms:function(t,e,i){return i=i||0,(t="string"==typeof t?r(t):t).position().top+t.outerHeight()-i-(e.scrollTop()+e.height())}):(s=this.data("lazyLoadSettings"))&&(s.loading||s.load()):(s=this.data("lazyLoadSettings"))&&(s.loading=!1):(s=this.data("lazyLoadSettings"))&&(s.loading=!0):(s=this.data("lazyLoadSettings"))&&(s.stopped=!1,s.loading=!1,this.get(0).onscroll=null,this.lazyLoad(s)):(s=this.data("lazyLoadSettings"))&&(s.stopped=!0)}}(jQuery),function(d){d.fn.favorite=function(t,e,i){var n=this,o=n.data("favoriteSettings")||d.extend({url:"",onSuccess:function(t){},onFailure:function(t){},serialize:function(t){}},e||{});n.data("favoriteSettings",o);var s="star-empty star-hover star",a=n.data("favoriteSettingsPrefix")||"favorite-"+(""+Math.random()).slice(2);n.data("favoriteSettingsPrefix",a);function r(t){return t.find(".icon16")}var l=n.data("favoriteSettingsInitIcon")||function(t){var e=r(t);e.removeClass(s+" loading"),t.hasClass(a+"-loading")?e.addClass("loading"):t.hasClass(a+"-favorite")?e.addClass("star"):e.addClass("star-empty")};if(n.data("favoriteSettingsInitIcon",l),"init"!==e){function c(t,e){t.removeClass(a+"-loading "+a+"-favorite"),"loading"===e?t.addClass(a+"-loading"):"favorite"===e&&t.addClass(a+"-favorite"),l(t)}return n.on("mouseenter",t,function(){var t=d(this),e=r(t);t.hasClass(a+"-loading")||e.removeClass(s).addClass("star-hover")}).on("mouseleave",t,function(){var t=d(this),e=r(t);t.hasClass(a+"-loading")||e.removeClass(s).addClass(t.hasClass(a+"-favorite")?"star":"star-empty")}).on("click",t,function(){var t,e,i,n=d(this);"loading"!==((t=n).hasClass(a+"-loading")?"loading":t.hasClass(a+"-favorite")?"favorite":void 0)&&(c(n,"loading"),e=function(t){var e=null;o.onSuccess&&(e=o.onSuccess.apply(n,[t])),c(n,"string"==typeof e?e:"favorite")},i=function(t){o.onFailure&&o.onFailure.apply(n,[t])},d.get(o.url||"",o.serialize(n),"json").success(function(t){t&&"ok"===t.status?e&&e(t):i&&i(t)}).fail(function(t){i&&i(t)}))}),n}n.find(t).each(function(){var t=d(this);r(t).hasClass("star")&&t.addClass(a+"-favorite"),l(d(this))})}}(jQuery),function(t){"use strict";function o(t,e,i){var n=/[^\w\-\.:]/.test(t)?new Function(o.arg+",tmpl","var _e=tmpl.encode"+o.helper+",_s='"+t.replace(o.regexp,o.func)+"';return _s;"):o.cache[t]=!i&&o.cache[t]||o(o.load(t));return e?n(e,o):function(t){return n(t,o)}}o.cache={},o.load=function(t){var e=document.getElementById(t);if(!e&&console)throw{message:"template with id="+t+" not found"};return e?("textarea"==e.tagName.toLowerCase()?e.value:document.getElementById(t).innerHTML).replace(/<\\\/(\w+)/g,"</$1"):null},o.regexp=/([\s'\\])(?![^%]*%\})|(?:\{%(=|#)([\s\S]+?)%\})|(\{%)|(%\})/g,o.func=function(t,e,i,n,o,s){return e?{"\n":"\\n","\r":"\\r","\t":"\\t"," ":" "}[t]||"\\"+t:i?"="===i?"'+_e("+n+")+'":"'+("+n+"||'')+'":o?"';":s?"_s+='":void 0},o.encReg=/[<>&"'\x00]/g,o.encMap={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#39;"},o.encode=function(t){return String(t||"").replace(o.encReg,function(t){return o.encMap[t]||""})},o.arg="o",o.helper=",print=function(s,e){_s+=e&&(s||'')||_e(s);},include=function(s,d){_s+=tmpl(s,d);}","function"==typeof define&&define.amd?define(function(){return o}):t.tmpl=o}(this),$.fn.liveDraggable=function(e){this.each(function(t,e){var i=$(this);i.data("init_draggable")&&i.die("mouseover",i.data("init_draggable"))}),this.die("mouseover").live("mouseover",function(){var t=$(this);t.data("init_draggable")||t.data("init_draggable",arguments.callee).draggable(e)})},$.fn.liveDroppable=function(e){this.each(function(t,e){var i=$(this);i.data("init_droppable")&&i.die("mouseover",i.data("init_droppable"))});function t(){var t=$(this);t.data("init_droppable")||(t.data("init_droppable",arguments.callee).droppable(e),t.mouseover())}t.call(this),this.die("mouseover",t).live("mouseover",t)},jQuery,$.fn.filesDialog=function(t,e){var i,n,o=$(this);if("height"===t||"width"===t)return $.isNumeric(e)?void o.find(".dialog-window").css("height"===t?{height:e,minHeight:e}:{width:e,minWidth:e}):"height"===t?o.find(".dialog-window").height():o.find(".dialog-window").width();"function"==typeof(t=t||{}).onFirstLoad&&(i=t.onLoad||function(){},n=t.onFirstLoad,t.onLoad=function(){var t=Array.prototype.slice.call(arguments);i.counter=i.counter||0,i.counter||n.apply(this,t),i.apply(this,t),i.counter+=1});e=function(){o.waDialog(t)};o.bind("open",e),e()},function(r){"use strict";r.widget("wa.fileupload",r.blueimp.fileupload,{options:{autoUpload:!1,maxNumberOfFiles:void 0,limitConcurrentUploads:1,maxFileSize:void 0,minFileSize:1,acceptFileTypes:/.*$/i,previewFileTypes:/^image\/(gif|jpeg|png)$/,previewMaxFileSize:5e6,previewMaxWidth:80,previewMaxHeight:80,previewAsCanvas:!0,dataType:"json",add:function(t,e){var i=r(this).data("fileupload"),n=e.files,o=i.dialog;o.is(":hidden")&&o.trigger("openUploader"),i._adjustMaxNumberOfFiles(-n.length),e.isAdjusted=!0,e.files.valid=e.isValidated=i._validate(n),e.context=i._renderUpload(n).appendTo(i._files).data("data",e),i._reflow=i._transition&&e.context[0].offsetWidth,e.context.addClass("in"),(i.options.autoUpload||e.autoUpload)&&e.isValidated&&e.submit(),(o=i.dialog).data("step2xhr").done(function(){var t=i._files.children("li").length,e=r(".f-upload-step2 h1",o);e.find(".f-title").html(e.data("tmpl").replace("%d",t)),r(".f-upload-step1",o).fadeOut(4),r(".f-upload-step1-buttons",o).hide(),r(".f-upload-step2",o).show(),r(".f-upload-step2-buttons",o).show(),r(".f-upload-step2",o).find(".f-access-denied").length&&(r(".f-upload-step2-buttons",o).find(".start").attr("disabled",!0),o.filesDialog("height",200),o.filesDialog("width",400),o.trigger("resize"))})},send:function(t,e){var i=r(this).data("fileupload");if(!e.isValidated&&(e.isAdjusted||i._adjustMaxNumberOfFiles(-e.files.length),!i._validate(e.files)))return!1;e.context&&e.dataType&&"iframe"===e.dataType.substr(0,6)&&e.context.find(".f-upload-onefile-progress").css("width","100%")},submit:function(t,e){r(this).data("data",e)},done:function(t,i){var n,o=r(this),s=o.data("fileupload");i.originalFiles.length;i.context&&i.context.each(function(t){var e=i.result&&r.isArray(i.result.files)&&i.result.files[t]||{error:$_("Empty result")};e.error&&s._adjustMaxNumberOfFiles(1),o.data("result",i.result),s._transitionCallback(r(this).removeClass("in"),function(t){s.filesCount++,(n=s._renderDownload([e])).replaceAll(t),s._reflow=s._transition&&n[0].offsetWidth,n.addClass("in"),e.error||(s.filesIds.push(e.id),setTimeout(function(){n.hide(200)},5e3))})})},fail:function(t,i){var n,o=r(this).data("fileupload");o._adjustMaxNumberOfFiles(i.files.length),i.context?i.context.each(function(t){var e;"abort"!==i.errorThrown?((e=i.files[t]).error=e.error||i.errorThrown||!0,"object"!=typeof i.jqXHR||i.jqXHR||(e.responseText=i.jqXHR.responseText),o._transitionCallback(r(this).removeClass("in"),function(t){n=o._renderDownload([e]).replaceAll(t),o._reflow=o._transition&&n[0].offsetWidth,n.addClass("in")})):o._transitionCallback(r(this).removeClass("in"),function(t){t.remove()})}):"abort"!==i.errorThrown&&(o._adjustMaxNumberOfFiles(-i.files.length),i.context=o._renderUpload(i.files).appendTo(o._files).data("data",i),o._reflow=o._transition&&i.context[0].offsetWidth,i.context.addClass("in"))},progress:function(t,e){e.context&&e.context.find(".f-upload-onefile-progress").css("width",parseInt(e.loaded/e.total*90,10)+"%")},progressall:function(t,e){var i=r(this);i.find(".f-fileupload-progressbar").css("width",parseInt(e.loaded/e.total*95,10)+"%"),r(".f-upload-filescount").html(parseInt(e.loaded/e.total*95,10)+"%"),i.find(".progress-extended").each(function(){r(this).html(i.data("fileupload")._renderExtendedProgress(e))})},start:function(t,e){var i=r(this),n=i.data("fileupload");n.filesCount=0,n.filesIds=[],r(".f-upload-step2",i).hide(),r(".f-upload-step2-buttons",i).hide(),r(".f-upload-step3",i).show(),r(".f-upload-step3-buttons",i).show(),r(".f-upload-step3-buttons .cancel",i).show(),r(".f-fileupload-progressbar",i).css("width","0%"),r(".f-upload-step3-buttons .f-progressbar",i).show(),r(".f-upload-step3-buttons .cancel",i).text($_("Stop upload")),r(".f-upload-error",i).hide()},stop:function(t){var e=r(this),i=e.data("fileupload"),n=i.filesCount,i=i.dialog;r(".f-upload-filescount",e).html("100%"),r(".f-fileupload-progressbar",e).animate({width:"100%"}),e.data("is_error")&&(r(".f-upload-step3-buttons .progressbar",e).hide(),r(".f-upload-filescount",e).hide(),r(".f-upload-error",e).show()),e.data("is_error")||e.data("is_aborted")||(e.data("result").files_count=n,i.trigger("finishUploader",[e.data("result")])),e.data("is_error",!1),e.data("is_aborted",!1),r(".f-upload-step3-buttons .cancel",i).text($_("Close"))},destroy:function(t,e){var i=r(this).data("fileupload");e.url&&r.ajax(e),i._adjustMaxNumberOfFiles(1),i._transitionCallback(e.context.removeClass("in"),function(t){t.remove()})}},_enableDragToDesktop:function(){var t=r(this),e=t.prop("href"),i=decodeURIComponent(e.split("/").pop()).replace(/:/g,"-"),n="application/octet-stream";t.bind("dragstart",function(t){try{t.originalEvent.dataTransfer.setData("DownloadURL",[n,i,e].join(":"))}catch(t){}})},_adjustMaxNumberOfFiles:function(t){"number"==typeof this.options.maxNumberOfFiles&&(this.options.maxNumberOfFiles+=t,this.options.maxNumberOfFiles<1?this._disableFileInputButton():this._enableFileInputButton())},_formatFileSize:function(t){return r.files.formatFileSize(t)},_formatBitrate:function(t){return"number"!=typeof t?"":1e9<=t?(t/1e9).toFixed(2)+" Gbit/s":1e6<=t?(t/1e6).toFixed(2)+" Mbit/s":1e3<=t?(t/1e3).toFixed(2)+" kbit/s":t+" bit/s"},_formatTime:function(t){var e=new Date(1e3*t),t=parseInt(t/86400,10);return(t=t?t+"d ":"")+("0"+e.getUTCHours()).slice(-2)+":"+("0"+e.getUTCMinutes()).slice(-2)+":"+("0"+e.getUTCSeconds()).slice(-2)},_formatPercentage:function(t){return(100*t).toFixed(2)+" %"},_renderExtendedProgress:function(t){return this._formatBitrate(t.bitrate)+" | "+this._formatTime(8*(t.total-t.loaded)/t.bitrate)+" | "+this._formatPercentage(t.loaded/t.total)+" | "+this._formatFileSize(t.loaded)+" / "+this._formatFileSize(t.total)},_hasError:function(t){return t.error||(this.options.maxNumberOfFiles<0?"maxNumberOfFiles":this.options.acceptFileTypes.test(t.type)||this.options.acceptFileTypes.test(t.name)?this.options.maxFileSize&&t.size>this.options.maxFileSize?"maxFileSize":"number"==typeof t.size&&t.size<this.options.minFileSize?"minFileSize":null:"acceptFileTypes")},_validate:function(t){var i=this,n=!!t.length;return r.each(t,function(t,e){e.error=i._hasError(e),e.error&&(n=!1)}),n},_renderTemplate:function(t,e){return r(this.options.templateContainer).html(t({files:e,formatFileSize:this._formatFileSize,options:this.options})).children()},_renderUpload:function(t){return this._renderTemplate(this.options.uploadTemplate,t)},_renderDownload:function(t){for(var e=this.element,i=this._renderTemplate(this.options.downloadTemplate,t),n=0;n<t.length;n++)if(t[n].error){e.data("is_error",!0);break}return i.find("a").each(this._enableDragToDesktop),i},_startHandler:function(t){t.preventDefault();var e=r(this),t=e.closest(".f-template-upload").data("data");t&&t.submit&&!t.jqXHR&&t.submit()&&e.prop("disabled",!0)},_cancelHandler:function(t){t.preventDefault();var e=r(this).closest(".f-template-upload").data("data")||{};e.jqXHR?(r(t.data.fileupload.element[0]).data("is_aborted",!0),e.jqXHR.abort()):(e.errorThrown="abort",t.data.fileupload._trigger("fail",t,e))},_deleteHandler:function(t){t.preventDefault();var e=r(this);t.data.fileupload._trigger("destroy",t,{context:e.closest(".template-download"),url:e.attr("data-url"),type:e.attr("data-type"),dataType:t.data.fileupload.options.dataType})},_transitionCallback:function(e,i){var n=this;this._transition&&e.hasClass("fade")?e.bind(this._transitionEnd,function(t){t.target===e[0]&&(e.unbind(n._transitionEnd),i.call(n,e))}):i.call(this,e)},_initTransitionSupport:function(){var t=(document.body||document.documentElement).style,e="."+this.options.namespace;this._transition=void 0!==t.transition||void 0!==t.WebkitTransition||void 0!==t.MozTransition||void 0!==t.MsTransition||void 0!==t.OTransition,this._transition&&(this._transitionEnd=["TransitionEnd","webkitTransitionEnd","transitionend","oTransitionEnd"].join(e+" ")+e)},_initButtonBarEventHandlers:function(){var o=this,t=o.element.find(".dialog-buttons"),s=o._files,a=o.dialog,e=this.options.namespace;t.find(".start").bind("click."+e,function(t){t.preventDefault();function e(){var t=r(".f-upload-step2 .f-upload-step-main-content",a).find("[name=folder_id]");return t.length?t.val()||"":r.files.controller.getCurrentFolderId()}function i(){var t=r(".f-upload-step2 .f-upload-step-main-content",a).find("[name=storage_id]");return t.length?t.val()||"":r.files.controller.getPreviousStorageId()}r.wa.fn={getStorageId:i,getFolderId:e};var t=o._fileNames,n=r(".f-upload-step2 .f-upload-step-name-conflict-content",a);n.find("[name=solve]").length?s.find(".start").click():r.get("?module=upload&action=nameConflict",{folder_id:e(),storage_id:i(),file_names:t},function(t){t=r("<div>").html(t);t.find(".f-conflict-files").children().length?(n.html(t.html()),t.remove()):s.find(".start").click()})}),t.find(".cancel").bind("click."+e,function(t){t.preventDefault(),s.find(".cancel").click()}),t.find(".delete").bind("click."+e,function(t){t.preventDefault(),s.find(".delete input:checked").siblings("button").click()}),t.find(".toggle").bind("change."+e,function(t){s.find(".delete input").prop("checked",r(this).is(":checked"))})},_destroyButtonBarEventHandlers:function(){this.element.find(".fileupload-buttonbar button").unbind("click."+this.options.namespace),this.element.find(".fileupload-buttonbar .toggle").unbind("change."+this.options.namespace)},_initEventHandlers:function(){r.blueimp.fileupload.prototype._initEventHandlers.call(this);var t={fileupload:this};this._files.delegate(".start","click."+this.options.namespace,t,this._startHandler).delegate(".cancel","click."+this.options.namespace,t,this._cancelHandler).delegate(".delete button","click."+this.options.namespace,t,this._deleteHandler),this._initButtonBarEventHandlers(),this._initTransitionSupport()},_destroyEventHandlers:function(){this._destroyButtonBarEventHandlers(),this._files.undelegate(".start","click."+this.options.namespace).undelegate(".cancel","click."+this.options.namespace).undelegate(".delete button","click."+this.options.namespace),r.blueimp.fileupload.prototype._destroyEventHandlers.call(this)},_enableFileInputButton:function(){this.element.find(".fileinput-button input").prop("disabled",!1).parent().removeClass("disabled")},_disableFileInputButton:function(){this.element.find(".fileinput-button input").prop("disabled",!0).parent().addClass("disabled")},_initTemplates:function(){this.options.templateContainer=document.createElement(this._files.prop("nodeName")),this.options.uploadTemplate=window.tmpl("f-template-upload"),this.options.downloadTemplate=window.tmpl("f-template-download")},_onDrop:function(e){e.preventDefault();var i=e.data.fileupload,t=i.dialog;r(".f-upload-step3",t).is(":visible")||void 0!==(t=e.dataTransfer=e.originalEvent.dataTransfer)&&i._getFilesFromDataTransfer(t).done(function(t){t={files:r.each(t,i._normalizeFile)};!1!==i._trigger("drop",e,t)&&i._onAdd(e,t)})},_getFilesFromDataTransfer:function(t){return this._isWebkitGetAsEntrySupport()?this._getFilesUseWebkitGetAsEntry(t):this._isFileReaderSupport()?this._getFilesUseFileReader(t):this._getFilesBySimpleCheck(t)},_isWebkitGetAsEntrySupport:function(){return"undefined"!=typeof DataTransferItem&&void 0!==DataTransferItem.prototype.webkitGetAsEntry},_isFileReaderSupport:function(){return"undefined"!=typeof FileReader},_getFilesUseWebkitGetAsEntry:function(t){for(var e=r.Deferred(),i=[],n=0;n<t.files.length;n+=1){var o=t.items&&t.items[n];o&&o.webkitGetAsEntry().isDirectory||i.push(t.files[n])}return e.resolve(i),e.promise()},_getFilesUseFileReader:function(t){for(var e=[],i=0;i<t.files.length;i+=1){var n=t.files[i],o=r.Deferred();if(e.push(o),n.type&&n.size%4096!=0)o.resolve({file:n,is_dir:!1});else try{!function(t,e){var i=new FileReader;i.readAsArrayBuffer(t),i.onload=function(){e.resolve({file:t,is_dir:!1})},i.onerror=function(){e.resolve({file:t,is_dir:!0})}}(n,o)}catch(t){o.resolve({file:n,is_dir:!0})}}o=r.Deferred();return r.when.apply(r,e).done(function(){for(var t=[],e=0;e<arguments.length;e+=1)arguments[e].is_dir||t.push(arguments[e].file);o.resolve(t)}),o.promise()},_getFilesBySimpleCheck:function(t){for(var e=r.Deferred(),i=[],n=0;n<t.files.length;n+=1)file.type&&file.size%4096!=0&&i.push(t.files[n]);return e.resolve(i),e.promise()},_onAdd:function(t,e){r.blueimp.fileupload.prototype._onAdd.call(this,t,e);var i=[];r.each(e.files,function(t,e){i.push(e.name)}),t.data.fileupload._fileNames=i},_initFiles:function(){this._files=this.element.find(".files")},_create:function(){this._initFiles(),r.blueimp.fileupload.prototype._create.call(this),this._initTemplates(),this.dialog=this.options.dialog},destroy:function(){r.blueimp.fileupload.prototype.destroy.call(this)},enable:function(){r.blueimp.fileupload.prototype.enable.call(this),this.element.find("input, button").prop("disabled",!1),this._enableFileInputButton()},disable:function(){this.element.find("input, button").prop("disabled",!0),this._disableFileInputButton(),r.blueimp.fileupload.prototype.disable.call(this)}})}(jQuery),function(t){var e,i;t(document).on("dragstart",function(){e=!0}).on("dragover",function(){e||(i?clearTimeout(i):t("#wa").addClass("file-hover"),i=setTimeout(function(){t("#wa").removeClass("file-hover"),i=null,e=!1},100))}).on("dragend",function(){e=!1})}(jQuery),function(c){c.files=c.extend(c.files||{},{init:function(t){this.config.init(t.config||{}),this.runBackgroundTasks(),new Sidebar(c("#f-sidebar")),c.files.controller.init(),history.back&&c("body").on("click",".f-back-to-list",function(){history.back()}),c.wa.errorHandler=function(t){return c.files.getXWaFilesLocation(t)||c.files.getXWaFilesSourceStatus(t)?(c.wa.dialogHide(),!1):403===t.status?(c.files.alert403Error(t.responseText),!1):void 0},c(document).ajaxComplete(function(t,e){if(c.files.getXWaFilesLocation(e))return window.location.href=c.files.getXWaFilesLocation(e),c.wa.dialogHide(),!1;e=c.files.getXWaFilesSourceStatus(e);return e?(c.wa.dialogHide(),"in-pause"===e?c.files.alertError($_("Too many requests to external source service. Please try again in a few minutes.")):c.files.alertError($_("Server error")),!1):void 0})},load:function(t,o,e){e=e||{};var s=c.files.load_protector=Math.random(),a=c.files.config.getMainContainer();e.container&&("string"===c.type(e.container)&&c(e.container).length||e.container.length)&&(a=c(e.container));function i(t){var e=c(".f-load-block",a).first();if(r.hide(),s===c.files.load_protector){var i=c("<div></div>").html(t),n=i.find(".h-main-title").text();if(n&&c.files.setBrowserTitle(n),i.remove(),e.html(t),o)try{o.call(this)}catch(t){}c(window).trigger(c.Event("wa_loaded"))}}var r=c(".f-loading",a).show(),n=c.files.load.onSuccess||i,l=c.files.load.onError||function(t){i(t.responseText)};c.get(t).success(function(t,e,i){c.files.getXWaFilesLocation(i)||c.files.getXWaFilesSourceStatus(i)||n&&n(t)}).error(function(t,e,i){c.files.getXWaFilesLocation(t)||c.files.getXWaFilesSourceStatus(t)||l&&l(t)}).always(function(t,e,i){c.files.getXWaFilesLocation(i)||c.files.getXWaFilesSourceStatus(i)})},alert403Error:function(e){var t=c("#f-403-error-dialog");c(".f-dialogs-section .dialog").not(t).hide(),t.filesDialog({onLoad:function(t){c(this).find(".f-content").html(e)}})},alertError:function(t,e){c("#f-error-dialog").filesDialog({onLoad:function(){c(this).find(".f-text").html(t)}}),e&&this.logError(e)},alertInfo:function(t){c("#f-message-dialog").filesDialog({onLoad:function(){c(this).find(".f-text").html(t)}})},getXWaFilesLocation:function(t){return t&&t.getResponseHeader&&t.getResponseHeader("X-Wa-Files-Location")||""},getXWaFilesSourceStatus:function(t){return t&&t.getResponseHeader&&t.getResponseHeader("X-Wa-Files-Source-Status")||""},confirmDelete:function(t,e,i){i=this.confirm(t,e,i);return i.find(".f-confirm-ok").removeClass("green").addClass("red"),i.find(".f-confirm-ok").val($_("Delete")),i},confirm:function(o,s,a){var t=c("#f-confirm-dialog");t.find(".f-confirm-ok").removeClass("red").addClass("green"),t.find(".f-confirm-ok").val($_("Yes"));var r="";return c.isPlainObject(o)&&(r=o.title||"",o=o.msg||""),t.filesDialog({onLoad:function(){var t=c(this);t.find(".f-title").html(r),t.find(".f-text").html(o);var e=t.find(".f-title").height(),i=t.find(".f-text").height(),n=t.find(".dialog-buttons").height(),e=Math.min(Math.max(i+n+e,300),150);t.filesDialog("height",e),t.find(".f-confirm-ok").unbind(".files").bind("click.files",function(){t.trigger("close"),s&&s.apply(c(this))}),t.find(".f-confirm-cancel").unbind(".files").bind("click.files",function(){a&&a.apply(c(this))})}}),t},jsonPost:function n(o,t,s,a,r){if(1===arguments.length&&c.isPlainObject(o)&&(o=(e=o).url||"",t=e.data||"",s=e.onSuccess,a=e.onError||e.onFailure||e.onFail,r=e.onAlways),(t=c.isEmptyObject(t)?{}:t)._timestamp=Date.now(),(n.run=n.run||{})[o])return n.run[o];var e=c.post(o,t,function(t,e,i){c.files.getXWaFilesLocation(i)||c.files.getXWaFilesSourceStatus(i)||(t?s&&s(t):a&&a())},"json").error(function(t){c.files.getXWaFilesLocation(t)||c.files.getXWaFilesSourceStatus(t)||403==t.status||a&&a(t)}).always(function(t,e,i){delete n.run[o],c.files.getXWaFilesLocation(i)||c.files.getXWaFilesSourceStatus(i)||r&&r(t)});return n.run[o]=e,n.run[o]},showValidateErrors:function(t,i){c.each(t,function(t,e){i.find('[name="'+e.name+'"]').addClass("error").parent().append('<em class="errormsg">'+e.msg+"</em>")})},onFormChange:function(e,i){var t=e.find(":input");t.on("change.files_form_change",function(){i.apply(e,[this])}),t.filter("select").on("click.files_form_change",function(){i.apply(e,[this])});var n=null;t.filter("textarea,input[type=text]").on("keydown.files_form_change",function(){n&&(clearTimeout(n),n=null);var t=this;n=setTimeout(function(){i.apply(e,[t])},250)})},offFormChange:function(t){t.find(":input,:select").off(".file_form_change")},clearValidateErrors:function(t){t.find(".errormsg").remove().end().find(".error").removeClass("error")},initLazyLoad:function(i){var n=i.count,o=i.total_count,t=i.url,s=c(i.container),a=void 0===i.auto||i.auto,r=c(window);r.lazyLoad("stop"),n<o&&(r.lazyLoad({container:s,state:a?"wake":"stop",load:function(){r.lazyLoad("sleep"),c(".f-lazyloading-link").hide(),c(".f-lazyloading-progress").show(),c.get(t+"&lazy=1&offset="+n+"&total_count="+o,function(t){var e=c("<div></div>").html(t),t=e.find(".f-catalog-item");t.length?(n+=t.length,c(".f-catalog-wrapper",s).append(t),o<=n?(r.lazyLoad("stop"),c(".f-lazyloading-progress").hide()):(r.lazyLoad("wake"),c(".f-lazyloading-link").show(),a||c(".f-lazyloading-progress").hide())):(r.lazyLoad("stop"),c(".f-lazyloading-progress").hide()),c(".f-lazyloading-progress-string",s).replaceWith(c(".f-lazyloading-progress-string",e)),c(".f-lazyloading-chunk",s).replaceWith(c(".f-lazyloading-chunk",e)),e.remove(),i.onLoad&&i.onLoad(),c.files.retina()})}}),s.on("click",".lazyloading-link",function(){return c(window).lazyLoad("force"),!1}))},refreshSidebar:function t(){if(!t.load){t.load=!0;var e=c.files.config.getSidebar(),i=e.find(".selected"),n=(i.attr("class")||"").split(/\s+/).join(".");return c.get("?module=backend&action=sidebar",function(t){c("#f-sidebar").html(t)}).always(function(){t.load=!1,(i=n?e.find(n):c()).length?i.addClass("selected"):c.files.config.getSidebar().trigger("notify",{hash:c.files.controller.getCurrentHash()})})}},setBrowserTitle:function(t,e){e=e?"":"  "+this.config.getAccountName();document.title=t+e},iButton:function(t,e){e=c.extend({labelOn:"",labelOff:"",className:"mini"},e||{});return t.iButton(e),t},moveFiles:function(t){var i=t.file_ids||[],n=t.storage_id||0,o=t.folder_id||0,s=t.is_restore||"",a=t.onFailure||t.onError||t.onFail,e=t.onAlways,r=t.onSuccess,t=t.beforeMoveFiles;if(n&&c.files.controller.getCurrentStorageId()===n||o&&c.files.controller.getCurrentFolderId()===o)return a&&a({same_place:!0}),!1;t&&t(),c.files.jsonPost({url:"?module=move&action=files"+(s?"&restore=1":""),data:{folder_id:o,storage_id:n,file_id:i},onSuccess:function(t){var e;t&&"ok"===t.status&&t.data&&t.data.success?r&&r(t):t&&t.data&&t.data.unallowed_exist?(e=c.map(i,function(t){return"file_id[]="+t}).join("&"),c.files.loadDialog("?module=move&"+e+"&storage_id="+n+"&folder_id="+o)):t&&t.data&&t.data.files_conflict?(e=c.map(i,function(t){return"file_id[]="+t}).join("&"),c.files.loadDialog("?module=move&action=nameConflict&"+e+"&storage_id="+n+"&folder_id="+o+(s?"&restore=1":""))):t&&t.data?a(t.data):t&&t.errors?a(t.errors):a()},onFailure:function(t){a(t)},onAlways:function(){e&&e()}})},filterSettingsFormSubmit:function(e,t){e.find(".loading").show(),c.files.clearValidateErrors(e);function i(t){c.files.alertError($_("Couldn't save filter"),t)}var n=(t=t||{}).onSuccess;c.files.jsonPost({url:"?module=filter&action=save",data:e.serialize(),onSuccess:function(t){"ok"!==t.status?c.files.showValidateErrors(t.errors,e):t.data.filter?(c.files.controller.gotoFilterPage(t.data.filter.id),c.files.refreshSidebar(),n&&n()):i(t.data)},onFailure:i,onAlways:function(){e.find(".loading").hide()}})},storageSettingsFormSubmit:function(e,i){if(e.data("loading"))return!1;e.data("loading",1),e.find(".loading").show(),c.files.clearValidateErrors(e);function n(t){403!==t.status&&c.files.alertError($_("Couldn't create storage"),t)}var o=(i=i||{}).onSuccess,t=i.onAlways;c.files.jsonPost({url:"?module=storage&action=save",data:e.serialize(),onSuccess:function(t){"ok"!==t.status?c.files.showValidateErrors(t.errors,e):t.data.storage?(!1!==i.reload&&c.files.controller.gotoStoragePage(t.data.storage.id),c.files.refreshSidebar(),o&&o()):n(t.data)},onFailure:n,onAlways:function(){e.data("loading",0),e.find(".loading").hide(),t&&t()}})},showNotificationMessage:function(t,e){function i(t){t.animate({height:0},500,function(){c(this).remove()})}c(".f-notification-message").length&&i(c(".f-notification-message"));var n=c("<div>").addClass("f-notification-message block double-padded").css({display:"none",position:"fixed",width:200,bottom:0,right:0,height:0,backgroundColor:e||"#FEF49C",border:"2px solid #DDD"});n.append("<p>"+t+"</p>"),n.appendTo(c("body")),n.show().animate({height:20},500),setTimeout(function(){i(n)},1500)},loadDialog:function e(i,n){if(e.load=e.load||{},e.cache=e.cache||{},!e.load[i]){var o=(n=n||{}).onLoad;if(n.cache&&e.cache[i]){var t=c("#"+e.cache[i]);if(t.length)return t.trigger("open"),void(o&&o(t))}e.load[i]=!0,c.get(i,function(t){e.load[i]=!1;t=c("<div>").html(t);n.cache&&(e.cache[i]=t.find(".dialog").attr("id")),c(".f-dialogs-section").append(t),o&&o(t.find(".dialog"))}).error(function(t){403===t.status&&c.files.alert403Error(t.responseText)})}},parseFileName:function(t){var e="",i=t.lastIndexOf(".");return 0<i&&(e=t.slice(i+1),t=t.slice(0,i)),{filename:t,ext:e}},retina:function(){c.Retina&&c("#wa-app").find("img:not(.f-retina-off)").addClass("f-retina-off").retina()},loc:function(t,e){var i=$_(t,e)||"";return i=e?i.replace("%d",t):i},ucfirst:function(t){return(t=t||"")?t.slice(0,1).toUpperCase()+t.slice(1):""},lcfirst:function(t){return(t=t||"")?t.slice(0,1).toLowerCase()+t.slice(1):""},logError:function(t){console&&(console.error?console.error(t):console.log(t))},runCopyFiles:function(){var t,e;c.files.config.canRunCopyFiles()&&(t=Math.floor(100*Math.random())/100,e={id:(""+Math.random()).slice(2),delay:1e4+5e3*t,timer:null,xhr:null},function(){try{e.timer&&clearTimeout(e.timer),e.xhr&&e.xhr.abort();function t(){if(!c.files.config.canRunCopyFiles())return e.timer&&clearTimeout(e.timer),void(e.xhr&&e.xhr.abort());console.log("copytask ["+e.id+"] start"),e.xhr=c.files.jsonPost("?module=copy&action=task&background_process=1&process_id="+e.id),e.xhr.always(function(){e.xhr=null,e.timer=setTimeout(t,e.delay),console.log("copytask ["+e.id+"] end")}),e.xhr.error(function(){return!1})}t(),e.timer=setTimeout(t,e.delay)}catch(t){console.error(["runCopyFiles fail",t])}}())},checkBackendChanges:function(e){var a=c.files.controller.getCurrentHash(2),i=a.split("/"),t=c.files.config.getHashesForChangeListener(),n=!1;if(c.each(t,function(t,e){if(i[0]==e)return!(n=!0)}),n){let t="?module=backend&action=changes";return e&&(t+="&background_process=1"),c.files.jsonPost(t,{hash:a}).done(function(t){var e,i,n,o,s;"ok"===t.status&&(e=function(t){return new Date(t||"1970-01-01").getTime()},t=t.data,i=t.info,o=null===(s=c.files.config.getPageInfo(a))&&null!==i||null!==s&&null===i,s=s||{},i=i||{},o||(n=e(i.update_datetime),e(s.update_datetime)<n&&(o=!0)),o||i.count!=s.count&&(o=!0),o||i.size!=s.size&&(o=!0),c.files.config.setPageInfo(a,i),o&&(c.files.controller.reloadPage(),c.files.refreshSidebar()))}).error(function(){return!1})}},peformTasks:function(){return c.files.jsonPost("?module=backend&action=tasksPerform&background_process=1")},runTasksPerformer:function(){try{var t=1e4+5e3*(Math.floor(100*Math.random())/100),e=this.peformTasks;e.timer&&(clearTimeout(e.timer),e.xhr.abort()),e.delay=t;var i=function(){e.xhr||(e.xhr=c.files.peformTasks().always(function(){e.xhr=null,e.timer=setTimeout(i,e.delay)}))};i()}catch(t){console.error(["runTasksPerformer fail",t])}},runBackendChanges:function(){try{var t=3e4+5e3*(Math.floor(100*Math.random())/100),e=this.runBackendChanges;e.timer&&(clearTimeout(e.timer),e.xhr.abort()),e.delay=t;var i=function(){e.xhr||(e.xhr=c.files.checkBackendChanges(!0),e.xhr?e.xhr.always(function(){e.xhr=null,e.timer=setTimeout(i,e.delay)}):(e.xhr=null,e.timer=setTimeout(i,e.delay)))};i()}catch(t){console.error(["runBackendChanges fail",t])}},runSyncWithSources:function(){if(!(this.config.getSourceCount()<=0&&this.runSyncWithSources.work)&&c.files.config.canRunSyncWithSources()){this.runSyncWithSources.work=!0;try{var t=1e4+5e3*(Math.floor(100*Math.random())/100),i=this.runSyncWithSources;i.timer&&(clearTimeout(i.timer),i.xhr&&i.xhr.abort()),i.delay=t;var n=function(){if(0<=(location.hash||"").replace(/(^[^#]*#\/*|\/$)/g,"").indexOf("source/"))return i.xhr=null,void(i.timer=setTimeout(n,i.delay));if(!i.paused&&!i.xhr){if(!c.files.config.canRunSyncWithSources())return i.timer&&clearTimeout(i.timer),void(i.xhr&&i.xhr.abort());var t=parseInt(c.files.controller.getCurrentFolderId(),10)||0,e=parseInt(c.files.controller.getCurrentStorageId(),10)||0;i.xhr=c.files.jsonPost("?module=source&action=sync&background_process=1",{folder_id:t,storage_id:e}),i.xhr.done(function(t){var e;"ok"===t.status&&t.data&&t.data.hasOwnProperty("source_id")&&(0<(e=c.files.config.getSourceId())&&t.data.source_id===e&&c.files.controller.reloadPage())}).always(function(){i.xhr=null,i.timer=setTimeout(n,i.delay)}).error(function(){return!1})}};n(),i.pause=function(){i.paused=!0},i.unpause=function(){i.paused=!1}}catch(t){this.runSyncWithSources.work=!1,console.error(["runSyncWithSources fail",t])}}},runBackgroundTasks:function(){for(var t=[this.runTasksPerformer,this.runCopyFiles,this.runSyncWithSources,this.runBackendChanges],e=[],i=0;i<t.length;i+=1)if(c.isArray(t[i]))for(var n=t[i][0],o=t[i][1],s=0;s<o;s+=1)e.push(n);else e.push(t[i]);for(t=(t=e).sort(function(){return Math.random()-Math.random()}),i=0;i<t.length;i+=1)!function(t){var e=Math.floor(100*Math.random())/100;setTimeout(function(){t.apply(c.files)},500*e)}(t[i])},deleteSource:function(t){return c.files.jsonPost({url:"?module=source&action=delete",data:{id:t},onSuccess:function(t){"ok"===t.status&&(c.files.refreshSidebar(),c.files.controller.gotoDefaultPage())}})},formatFileSize:function(t){return"number"!=typeof t?"":1e9<=t?c.files.formatNumber(t/1e9,2)+$_(" GB"):1e6<=t?c.files.formatNumber(t/1e6,2)+$_(" MB"):c.files.formatNumber(t/1e3,2)+$_(" KB")},formatNumber:function(t,e){if("number"!=typeof t)return"";var i="",i="number"==typeof e?t.toFixed(e):""+t;return i="ru_RU"===c.files.config.getLocale()?i.replace(".",","):i}})}(jQuery),function(n){n.files=n.files||{},n.files.config={init:function(t){var e,i=t||{};for(e in i)if(i.hasOwnProperty(e)){this["__"+e]=i[e];for(var n=e.split("_"),o="get",s=0;s<n.length;s+=1)o+=n[s].slice(0,1).toUpperCase()+n[s].slice(1);this[o]||function(t,e){e[o]=function(){return this["__"+t]}}(e,this)}},set:function(t,e){var i;n.isPlainObject(t)?this.init(t):((i={})[t]=e,this.init(i))},getLocaleStorage:function(){return this.__storage=this.__storage||new n.store,this.__storage},getLocale:function(){return this.__locale=this.__locale||"en_US",this.__locale},getSidebar:function(){return n("#"+this.__sidebar_id)},getMainContainer:function(){return n("#"+this.__main_container_id)},getFileList:function(){return n("#"+this.__file_list_id)},getStatisticsContainer:function(){return n("#"+this.__statistics_container_id)},setSourceId:function(t){this.__source_id=t},getSourceId:function(){return this.__source_id||0},getSourceCount:function(){return this.__source_count||0},setSourceCount:function(t){this.__source_count=parseInt(t,10)||0},canRunCopyFiles:function(t){return void 0===this.__can_run_copy_files&&(this.__can_run_copy_files=!0),void 0!==t&&(this.__can_run_copy_files=t),this.__can_run_copy_files},canRunSyncWithSources:function(t){return void 0===this.__can_run_sync_with_sources&&(this.__can_run_sync_with_sources=!0),void 0!==t&&(this.__can_run_sync_with_sources=t),this.__can_run_sync_with_sources},setPageInfo:function(t,e){this._list_info=this._list_info||{},this._list_info[t]=this._list_info[t]||{},this._list_info[t]=n.extend(this._list_info[t],e)},getPageInfo:function(t){return this._list_info=this._list_info||{},this._list_info[t]=this._list_info[t]||{},this._list_info[t]}}}(jQuery);var Sidebar=function(i){return(Sidebar=function(t){var e=this;i.isPlainObject(t)||(t={$sidebar:t||i()}),e.$sidebar=t.$sidebar||!1,e.localStorage=i.files.config.getLocaleStorage(),e.storage_name="files/sidebar_width",e.width=i.files.config.getSidebarWidth()||!1,e.active_width_class="left"+e.width+"px",e.initSidebar()}).prototype.initSidebar=function(){this.initWidth(),this.bindEvents()},Sidebar.prototype.bindEvents=function(){var e=this,t=e.$sidebar;t.on("click","ul li a",function(){t.find(".selected").removeClass("selected"),i(this).closest("li").addClass("selected")}),t.on("click","#s-category-list-widen-arrows .arrow",function(){var t=i(this).hasClass("right");return e.changeWidth(t),!1})},Sidebar.prototype.changeWidth=function(t){var e=this,i=e.$sidebar,n=e.width,o=e.active_width_class,t=t?n+50:n-50,n="left"+(t=(t=400<t?400:t)<200?200:t)+"px";i.hasClass(o)&&i.removeClass(o),i.addClass(n),e.width=t,e.active_width_class=n,localStorage.setItem(e.storage_name,t)},Sidebar.prototype.initWidth=function(){var t,e=this,i=e.$sidebar,n=e.active_width_class,o=localStorage.getItem(e.storage_name)||!1;o&&0<o&&o!=e.width&&(t="left"+o+"px",i.hasClass(n)&&i.removeClass(n),i.addClass(t),e.width=o,e.active_width_class=t),setTimeout(function(){i.addClass("is-animated")},100)},Sidebar}(jQuery),File=function(d){return(File=function(t){var e=this;e.$file=t.$file,e.file_id=t.file_id,e.can_rename=t.can_rename,e.can_edit_tags=t.can_edit_tags,e.can_comment=t.can_comment,e.full_access=t.full_access,e.initFile()}).prototype.initFile=function(){var t=this;t.bindEvents(),t.initTags(),t.can_rename&&t.initHeaderRename(),t.can_comment&&t.initComments(),t.full_access&&t.initMarkControl(),t.initFrontUrl()},File.prototype.bindEvents=function(){var t=this,e=t.$file;d(".f-in-sync").on("click",function(){return alert($_("Sync is in process. No changes available until synchronization finish.")),!1}),d("#f-share-link").on("click",function(){d.files.loadDialog("?module=share&file_id="+t.file_id)}),d("#f-public-link").on("click",function(){d.files.loadDialog("?module=share&public_link=1&file_id="+t.file_id)}),e.on("click",".f-delete-file:not(.f-in-sync)",function(){d.files.loadDialog("?module=delete&file_id[]="+t.file_id+"&from=fileinfo")}),e.on("click",".f-send-file",function(){d.files.loadDialog("?module=send&file_id[]="+t.file_id+"&from=fileinfo")})},File.prototype.initTags=function(){var t=this,e=t.$file.find(".f-tags-wrapper"),i=e.find("#f-file-tags"),n=t.$file.find(".f-popular-tags"),o=e.find(".saved-link"),s=e.data("add-tag-text")||"enter tags",a=t.can_edit_tags,r="is-shown",l={autocomplete_url:"",interactive:a,removeWithBackspace:!1,defaultText:""};function c(){o.hasOwnProperty("timeout")&&o.timeout&&clearTimeout(o.timeout),o.addClass(r),o.timeout=setTimeout(function(){o.removeClass(r),o.timeout=!1},500)}n.on("click","a",function(){var t=d(this).text();i.removeTag(t),i.addTag(t)}),a?l=d.extend(l,{defaultText:s,autocomplete:{source:function(t,e){d.getJSON("?module=tag&action=autocomplete&term="+t.term,function(t){"ok"===t.status?e(t.data.tags||[]):e([])})}},onAddTag:function(){d.files.jsonPost({url:"?module=tag&action=save&file_id="+t.file_id,data:{tags:i.val()}}),c()},onRemoveTag:function(){d.files.jsonPost({url:"?module=tag&action=save&file_id="+t.file_id+"&delete=1",data:{tags:i.val()}}),c()}}):(n=i.attr("id")+"_tagsinput",d("#"+n).addClass("f-readonly")),i.tagsInput(l),a&&d("#"+i.attr("id")+"_tag").bind("blur",function(){var t=d(this).val();t&&t!==s&&i.addTag(t)}),e.find("#f-file-tags_tag").val("").attr("placeholder",s)},File.prototype.initMarkControl=function(){var n=this;n.$file.find(".f-settings-colorbox :radio").click(function(){var i=d(this).val();d.files.jsonPost({url:"?module=mark&action=save",data:{file_id:[n.file_id],mark:i},onSuccess:function(t){var e;"ok"===t.status&&(t=((e=n.$file.find(".f-file-controls-wrapper")).attr("class")||"").split(" "),(t=d.map(t,function(t){return-1===t.indexOf("f-mark-")&&t})).push("f-mark-"+i),e.attr("class",t.join(" ")))}})})},File.prototype.initHeaderRename=function(){var n=this,o=n.$file.find(".f-editable-header"),s=d.files.parseFileName(o.text());o.inlineEditable({minSize:{width:o.width()},maxSize:{width:600},size:{height:30},inputClass:"bold",afterMakeEditable:function(t){t.selection("setPos",{start:0,end:s.filename.length})},afterBackReadable:function(t,e){if(!e.changed)return!1;function i(){d.files.jsonPost({url:"?module=rename&action=file",data:{id:n.file_id,name:d(t).val()},onSuccess:function(t){"ok"===t.status&&t.data.file?d.files.controller.reloadPage():(o.text(e.old_text),t.errors&&t.errors.sync&&d.files.alertError(t.errors.sync.msg))}})}d.files.parseFileName(d(t).val()).ext!==s.ext?d.files.confirm(o.data("confirm-text"),function(){i()},function(){o.text(e.old_text)}):i()}})},File.prototype.initComments=function(){var i=this,t=i.$file,e=t.find("#f-add-comment-form"),n=e.find(".f-text");e.find(".f-button").on("click",function(){a()}),t.on("click",".f-comment-delete",function(){return r(d(this)),!1}),n.on("keydown",function(t){13!==t.keyCode||t.altKey||!t.ctrlKey||t.shiftKey||a()});var o,s=function(){d(window).off(".f-file-comment")};o="wa_before_reload_page.f-file-comment",d(window).off(o).on(o,function(t){0<d.trim(n.val()).length&&t.preventDefault()});var a=function(){d.files.clearValidateErrors(e),d.files.jsonPost({url:"?module=comment&action=save&file_id="+i.file_id,data:e.serialize(),onSuccess:function(t){t&&"ok"===t.status&&t.data.comment_id?(s(),d.files.controller.doRedispatch()):t&&"ok"!==t.status&&d.files.showValidateErrors(t.errors,e)}})},r=function(t){var e=t.closest(".f-comment-item");t.html('<i class="icon16 loading"></i>'),d.get("?module=comment&action=delete&id="+e.data("id"),function(){i.$file.find(".f-comment-item").length<=1&&e.closest(".field").hide(),e.remove()})};d.files.onFormChange(e,function(){d.files.clearValidateErrors(e)})},File.prototype.initFrontUrl=function(){var t=d("#f-frontend-url"),e=d(".f-frontend-url-width");e.length&&t.length&&((e=e.width())&&t.width(e),t.on("click",function(){d(this).select()}))},File}(jQuery);!function(h){h.files=h.files||{},h.files.controller=h.extend(h.files.controller||{},{hashes:[],init:function(t){var e=this;e.options=h.extend(e.options,t||{}),void 0!==h.History&&(h.History.bind(h.files.controller.dispatch),h.History.unbind=function(i,n){n?h.History.handlers.specific[i]&&h.each(h.History.handlers.specific[i],function(t,e){if(e===n)return h.History.handlers.specific[i].splice(t,1),!1}):(n=i,h.each(h.History.handlers.generic,function(t,e){if(e===n)return h.History.handlers.generic.splice(t,1),!1}))});var i=window.location.hash;"#/"!==i&&i||(t=h.files.config.getLocaleStorage(),i=h.files.config.getContactId(),(i=t.get("files/settings/"+i)||{}).last_hash?(h.files.load.onError=function(){e.gotoDefaultPage(!0),delete h.files.load.onError},e.gotoPage(i.last_hash)):e.dispatch())},forceHash:function(t){t=h.files.controller.cleanHash(t),h.files.controller.currentHash!==t&&(h.files.controller.currentHash=t,h.wa.setHash(t))},backWithoutDispatch:function(t){var e;t&&h.History.bind(e=function(){h.History.unbind(e),t()}),this.skipDispatch=1,history.back()},redispatch:function(){this.currentHash=null,this.dispatch()},doRedispatch:function(t){this.currentHash=null,this.doDispatch(t)},skipDispatch:0,currentHash:null,cleanHash:function(t){for((t=void 0===t?window.location.hash.toString():t).length||(t=""+t);0<t.length&&"/"===t[t.length-1];)t=t.substr(0,t.length-1);return"#"!=(t+="/")[0]?t="#"+(t="/"!=t[0]?"/"+t:t):t[1]&&"/"!=t[1]&&(t="#/"+t.substr(1)),"#/"==t?"":t=(t||"").replace(/(^[^#]*#\/*|\/$)/g,"")},dispatch:function(t){return this!==h.files.controller?h.files.controller.dispatch(t):this.doDispatch({hash:t,afterActionApply:function(){h("html, body").animate({scrollTop:0},200)}})},doDispatch:function(t){var e=(t=h.isPlainObject(t)?t:{}).hash;if(0<h.files.controller.skipDispatch)return h.files.controller.skipDispatch--,!1;if(e=h.files.controller.cleanHash(e||void 0),h.files.controller.currentHash!=e){var i=h.files.controller.currentHash;h.files.controller.currentHash=e;var n=new h.Event("wa_before_dispatched");if(h(window).trigger(n),n.isDefaultPrevented())return h.files.controller.currentHash=i,h.wa.setHash(i),!1;this.hashes.push(e);100<this.hashes.length&&this.hashes.slice(Math.round(50));var o=h.files.config.getLocaleStorage(),s=this.hashes[this.hashes.length-1],n=h.files.config.getContactId(),i=o.get("files/settings/"+n)||{};if(i.last_hash=s,o.set("files/settings/"+n,i),e)if((e=e.split("/"))[0]){for(var a="",r=e.length,l=0;l<e.length;l++){var c=e[l];if(!(l<2)){r=l;break}if(0!==l){var d=a+c.substr(0,1).toUpperCase()+c.substr(1);h.files.controller[d+"Action"]?a=d:r=l;break}a=c}i=e.slice(r);h.files.controller[a+"Action"]?(h.files.controller.currentAction=a,h.files.controller.currentActionAttr=i,h.files.controller[a+"Action"].apply(h.files.controller,i),"function"==typeof t.afterActionApply&&t.afterActionApply()):console&&console.log("Invalid action name:",a+"Action")}else h.files.controller.defaultAction();else h.files.controller.defaultAction()}},getCurrentHash:function(t){var e=this.currentHash||"";return t=parseInt(t,10),isNaN(t)||t<=1?e:(e=e.split("/")).slice(0,t).join("/")},isAllListHash:function(){var t=this.getCurrentHash().split("/");return""===t[0]||"all"===t[0]},getIdOfTypeFromHash:function(t,e){if(!t||"string"!=typeof t)return null;e=e||"";t=new RegExp("^"+t+"\\/([\\d]+)$"),t=e.match(t),t=t&&parseInt(t[1],10);return"number"!=typeof t||isNaN(t)?null:t},getCurrentIdOfType:function(t){var e=this.getCurrentHash();return this.getIdOfTypeFromHash(t,e)},getCurrentFolderId:function(){return this.getCurrentIdOfType("folder")},getCurrentStorageId:function(){return this.getCurrentIdOfType("storage")},getCurrentFileId:function(){return this.getCurrentIdOfType("file")},getPreviousFolderId:function(){var t=this.hashes.length;if(t<=1)return null;t=this.hashes[t-2];return this.getIdOfTypeFromHash("folder",t)},getPreviousStorageId:function(){var t=this.hashes.length;if(t<=1)return null;t=this.hashes[t-2];return this.getIdOfTypeFromHash("storage",t)},load:function(t,e,i){h.files.load(t,function(){e&&e(),h.files.retina(),h.files.controller.afterLoadOnce&&h.files.controller.afterLoadOnce(),delete h.files.controller.afterLoadOnce},h.extend({},this.options,i))},reloadPage:function(t){var e=new h.Event("wa_before_reload_page");h(window).trigger(e),e.isDefaultPrevented()||(t?location.reload():this.redispatch())},gotoPage:function(t){t=this.cleanHash(t),this.getCurrentHash()===t?this.redispatch():location.hash="#/"+(t?t+"/":"")},replaceHashPrefix:function(t,e){t=h.files.controller.cleanHash(t),e=h.files.controller.cleanHash(e);t=t.split("/"),e=e.split("/"),e=e.join("/")+"/"+t.slice(e.length);return h.files.controller.cleanHash(e)},prepareHashForSomePage:function(t,e){return e||(e=this.getCurrentHash(),t=this.replaceHashPrefix(e,t)),t},gotoStoragePage:function(t,e){this.gotoPage(this.prepareHashForSomePage("storage/"+t+"/",e))},gotoFolderPage:function(t,e){this.gotoPage(this.prepareHashForSomePage("folder/"+t+"/",e))},gotoSearchPage:function(t,e){this.gotoPage(this.prepareHashForSomePage("search/"+t+"/",e))},gotoFilterPage:function(t,e){this.gotoPage(this.prepareHashForSomePage("filter/"+t+"/",e))},gotoSourcePage:function(t){this.gotoPage(this.prepareHashForSomePage("source/"+t+"/",!0))},gotoDefaultPage:function(t){t?this.gotoPage(""):this.gotoPage(this.prepareHashForSomePage("all",t))},gotoLastList:function(){for(var t=this.hashes.slice(0,-1),e="",i=t.length-1;0<=i;--i)if(this.isHashOfListPage(t[i])){e=t[i];break}this.gotoPage(e)},isHashOfListPage:function(t){t=(t=t||"").split("/");return 0<=["","all","storage","folder","favorite","trash","search","filter","tag"].indexOf(t[0])},defaultAction:function(){this.load("?module=backend&action=files")},allAction:function(t){this.load("?module=backend&action=files"+(t?"&"+t:""))},storageAction:function(t,e){this.load("?module=storage&action=files&id="+t+(e?"&"+e:""))},storageNewAction:function(){this.load("?module=storage&action=create")},sourceAction:function(t,e){this.load("?module=source&action=info&id="+t+(e?"&"+e:""))},sourceNewAction:function(){this.load("?module=source&action=create")},folderAction:function(t,e){this.load("?module=folder&action=files&id="+t+(e?"&"+e:""))},fileAction:function(t){this.load("?module=file&id="+t)},favoriteAction:function(t){this.load("?module=favorite&action=files"+(t?"&"+t:""))},trashAction:function(t){this.load("?module=trash&action=files"+(t?"&"+t:""))},searchAction:function(t,e){this.load("?module=search&action=files&hash="+t+(e?"&"+e:""))},filterAction:function(t,e){this.load("?module=filter&action=files&id="+t+(e?"&"+e:""))},filterNewAction:function(){this.load("?module=filter&action=create&acting_type=search")},tagAction:function(t,e){this.load("?module=tag&action=files&tags="+t+(e?"&"+e:""))},settingsAction:function(){this.load("?module=settings")},statisticsAction:function(i,e){function t(){var t=h.files.config.getStatisticsContainer().find(".f-statistics-menu");t.find(".selected").removeClass("selected");var e=t.find('a[href="#/statistics/'+i+'/"]');e.length&&e.closest("li").addClass("selected"),-1!==t.find("a").map(function(){return h(this).attr("href").replace("#/statistics/","").replace("/","")}).toArray().indexOf(i)?(-1!==i.indexOf("_")&&(i=h.map(i.split("_"),function(t,e){return 0<e?h.files.ucfirst(t):t}).join("")),o("?module=statistics&action="+i)):h(".f-loading",h.files.config.getStatisticsContainer()).hide()}var n=this,o=function(t){n.load(t+(e?"&"+e:""),null,{container:h.files.config.getStatisticsContainer()})};h.files.config.getStatisticsContainer().length?t():n.load("?module=statistics",function(){t()})},pluginsAction:function(t){var e=h("#f-sidebar");e.find("li.selected").removeClass("selected"),e.find('a[href="#/plugins/"]:first').parent().addClass("selected"),h("#wa-plugins-content").length||this.load("?module=plugins")},crontasksAction:function(){this.load("?module=backend&action=crontasks")}})}(jQuery),function(l){var e="is-hover";l.files=l.files||{},l.files.dragndrop={handlers:{},options:{},init:function(t){return this.options=t,this.initDragFiles(),this.initDropFiles(),this.initDropStorages(),this.initDropSharedFolders(),this.initDropTrash(),this.initDropFilters(),this},isFolder:function(t){return"folder"===t},isFile:function(t){return"file"===t},bind:function(t,e){return this.handlers[t]=e,this},trigger:function(t){if("function"==typeof this.handlers[t])return this.handlers[t].apply(this,Array.prototype.slice.call(arguments,1))},initDragFiles:function(){var t=l(".f-catalog-item",l.files.config.getFileList());function n(t){var e=l(".block.drop-target"),i=l(".f-drop-zone"),n="is-drop";t?(e.addClass("drag-active"),i.addClass(n)):(e.removeClass("drag-active"),i.removeClass(n))}t.find(".drag-handle").live("selectstart",function(){return!(document.onselectstart=function(){return!1})}),t.liveDraggable({opacity:.75,zIndex:9999,distance:5,appendTo:"body",cursor:"move",refreshPositions:!0,containment:[0,0,l(window).width(),{toString:function(){return l(document).height()}}],start:function(t,e){document.ondragstart=function(t){t.preventDefault()},e.helper.data("scrollTop",l(document).scrollTop()),l(document).on("scroll",l.files.dragndrop._scrolHelper),n(!0)},handle:".drag-handle",stop:function(t,e){document.ondragstart=null,document.onselectstart=null;var i=l(this);i.find("input:checked").length||i.removeClass("selected"),l("#hint-menu-block").hide().children().hide(),l(document).off("scroll",l.files.dragndrop._scrolHelper),n(!1)},helper:function(t,e){var i=1,n=l.files.config.getFileList().find(".f-catalog-item.selected");return n.length?i=-1!==n.index(this)?n.length:(l(this).addClass("selected"),n.length+1):l(this).addClass("selected"),'<div id="products-helper"><span class="indicator red">'+i+'</span><i class="icon10 no-bw" style="display:none;"></i></div>'},drag:function(t,e){t=t.originalEvent;e.position.left=t.pageX-20,e.position.top=t.pageY}})},initDropFiles:function(){l(".f-catalog-item",l.files.config.getFileList()).liveDroppable({disabled:!1,greedy:!0,tolerance:"pointer",drop:function(t,e){var i=e.draggable,e=l(this);if(!i.hasClass("f-catalog-item"))return!1;if(e.hasClass("selected"))return!1;if(!l.files.dragndrop.isFolder(e.data("type")))return!1;var i=e.data("id"),n=l.files.config.getFileList().find(".f-catalog-item.selected"),e=n.map(function(){return l(this).data("id")}).toArray();n.hide(),l.files.config.getFileList().trigger("move_files",[{file_ids:e,folder_id:i,error:function(){n.show()}}])}})},initDropStorages:function(){var t=l.files.config.getSidebar();l(".f-storage-list > li",t).liveDroppable({disabled:!1,greedy:!0,tolerance:"pointer",hoverClass:e,drop:function(t,e){var i,n,o=l(this).data("id");l.files.controller.getCurrentStorageId()!==o&&(n=(i=l.files.config.getFileList().find(".f-catalog-item.selected")).map(function(){return l(this).data("id")}).toArray(),l.files.config.getFileList().trigger("move_files",[{file_ids:n,storage_id:o,done:function(){i.hide()},error:function(){i.show()}}]))}})},initDropSharedFolders:function(){var t=l.files.config.getSidebar();l(".f-shared-folders > li",t).liveDroppable({disabled:!1,greedy:!0,tolerance:"pointer",hoverClass:e,drop:function(t,e){var i=l(this).data("id"),n=l.files.config.getFileList().find(".f-catalog-item.selected"),o=n.map(function(){return l(this).data("id")}).toArray();n.hide(),l.files.config.getFileList().trigger("move_files",[{file_ids:o,folder_id:i,error:function(){n.show()}}])}})},initDropTrash:function(){var t=l.files.config.getSidebar();l(".f-trash-files-wrapper",t).liveDroppable({disabled:!1,greedy:!0,tolerance:"pointer",hoverClass:e,drop:function(t,e){var i=l.files.config.getFileList().find(".f-catalog-item.selected").map(function(){return l(this).data("id")}).toArray();l.files.config.getFileList().trigger("move_files_to_trash",[{file_ids:i}])}})},initDropFilters:function(){var t=l.files.config.getSidebar();l(".f-filter-list-wrapper",t).liveDroppable({disabled:!1,greedy:!0,tolerance:"pointer",hoverClass:e,drop:function(){var t=l.files.config.getFileList().find(".f-catalog-item.selected").map(function(){return l(this).data("id")}).toArray();l.files.config.getFileList().trigger("make_filter",[{file_ids:t}]),l(this).removeClass(e)}})},_scrolHelper:function(t){var e=l("#products-helper"),i=e.data("scrollTop"),n=l(document).scrollTop(),i=i?n-i:50;e.css("top",e.position().top+i+"px"),e.data("scrollTop",n)},_extDragActivate:function(t,e,i){var n,o,s,a,r=i+"-last";e.hasClass("last")?(n=t.pageX,o=t.pageY,s=e.width(),a=e.height(),t=e.offset(),"thumbs"==l.files.dragndrop.options.view?n>t.left+.5*s&&n<=t.left+s?(e.removeClass(i).addClass(r),l.files.dragndrop._shiftToLeft(e)):n>t.left&&n<=t.left+.5*s?(e.removeClass(r).addClass(i),l.files.dragndrop._shiftToRight(e)):l.files.dragndrop._shiftAtPlace(e):"table"==l.files.dragndrop.options.view&&(o>t.top+.5*a?e.removeClass(i).addClass(r):o>t.top&&e.removeClass(r).addClass(i)),(o<t.top||o>t.top+a||n<t.left||n>t.left+s)&&e.removeClass(i).removeClass(r)):e.addClass("drag-active")},_bindExtDragActivate:function(e,i){l(document).bind("mousemove.ext_drag_activate",function(t){l.files.dragndrop._extDragActivate(t,e,i)})},_unbindExtDragActivate:function(){l(document).unbind("mousemove.ext_drag_activate")},_activatePhotoListItem:function(){var t=l(this),e=l.files.dragndrop.trigger("is_product_sortable"),i=e?"drag-active":"drag-active-disabled";e&&"thumbs"==l.files.dragndrop.options.view&&l.files.dragndrop._shiftToRight(t),t.hasClass("last")?l.files.dragndrop._bindExtDragActivate(t,i):t.addClass(i)},_unactivatePhotoListItem:function(){var t=l(this),e=l.files.dragndrop.trigger("is_product_sortable"),i=e?"drag-active":"drag-active-disabled",n=i+"-last";t.hasClass("last")&&l.files.dragndrop._unbindExtDragActivate(),t.removeClass(i+" "+n),e&&"thumbs"==l.files.dragndrop.options.view&&l.files.dragndrop._shiftAtPlace(t)},_shiftToLeft:function(t){var e,i;"left"!==t.data("shifted")&&((i=t.find(".p-wrapper")).length||(e=t.children(),(i=l("<div class='p-wrapper' style='position:relative;'></div>").appendTo(t)).append(e)),i.stop().animate({left:-15},200),t.data("shifted","left"))},_shiftToRight:function(t){var e,i;"right"!==t.data("shifted")&&((i=t.find(".p-wrapper")).length||(e=t.children(),(i=l("<div class='p-wrapper' style='position:relative;'></div>").appendTo(t)).append(e)),i.stop().animate({left:15},200),t.data("shifted","right"))},_shiftAtPlace:function(t){var e,i;t.data("shifted")&&((e=t.find(".p-wrapper")).length&&(i=e.children(),e.stop().css({left:0}),t.append(i),e.remove()),t.data("shifted",""))}}}(jQuery);var FilesCatalog=function(h){return(FilesCatalog=function(t){var e=this;e.$catalog=t.$catalog,e.$operationMenu=t.$operationMenu,e.$catalogWrapper=e.$catalog.closest(".f-catalog-content"),e.$catalogCheckAll=e.$catalog.find(".f-catalog-header .check-all-files"),e.$menuCheckAll=e.$operationMenu.find(".f-checkbox"),e.storage={shown_class:"is-shown",selected_class:"selected"},e.storage_id=t.storage_id||!1,e.folder_id=t.folder_id||!1,e.is_fixed_menu_init=!1,e.$lastSelectedFile=!1,e.selectedFilesCount=0,e.selectedFilesTypeCount={file:0,folder:0},e.initCatalog()}).prototype.initCatalog=function(){this.bindEvents(),this.highlightFiles()},FilesCatalog.prototype.bindEvents=function(){var o=this,t=o.$catalog,e=o.$catalogCheckAll,i=o.$menuCheckAll;t.on("click",".f-catalog-item .f-select-file",function(t){t.stopPropagation(),o.onSelectFile(t,h(this))}),t.on("click",".f-catalog-item",function(t){for(var e,i=h(t.target),n=!1;!i.is(".f-catalog-item");){if(i.is("a")){n=!0;break}i=i.parent()}n||((e=h(this).find(".f-select-file")).is(":disabled")||(e.attr("checked",!e.is(":checked")),o.onSelectFile(t,e)))}),e.on("click",function(){o.onSelectAll()}),t.on("selectAll",function(){o.onSelectAll(!0)}),t.on("unSelectAll",function(){o.onSelectAll(!1)}),i.on("click",function(){e.click()}),h(".f-in-sync").on("click",function(){return alert($_("Sync is in process. No changes available until synchronization finish.")),!1}),h("#f-copy-link:not(.f-in-sync)").on("click",function(){return o.showDialog("?module=copy",{is_copy:!0}),!1}),h("#f-move-link:not(.f-in-sync)").on("click",function(){return o.showDialog("?module=move",{is_move:!0}),!1}),h("#f-move-to-trash-link:not(.f-in-sync)").on("click",function(){return o.showDialog("?module=delete",{is_trash:!0}),!1}),h("#f-restore-link:not(.f-in-sync)").on("click",function(){return o.showDialog("?module=move&restore=1",{is_restore:!0}),!1}),h("#f-mark-link").on("click",function(){return o.showDialog("?module=mark",{is_mark:!0}),!1}),h("#f-delete-link:not(.f-in-sync)").on("click",function(){return o.showDialog("?module=delete&permanently=1",{is_delete:!0}),!1}),h("#f-rename-link:not(.f-in-sync)").on("click",function(){return o.showDialog("?module=rename&id=",{is_rename:!0}),!1}),h("#f-send-link").on("click",function(){return o.showDialog("?module=send&from=fileinfo",{is_send:!0}),!0}),h("#f-trash-clear").on("click",function(){var t=h(this).data("confirm-text");h.files.confirm(t,function(){h.files.jsonPost({url:"?module=trash&action=clear",onSuccess:function(){h.files.refreshSidebar(),h.files.controller.reloadPage()}})})}),h("#f-tags-link").on("click",function(){return o.showDialog("?module=tag",{is_tag:!0}),!1}),h("#f-create-folder-link:not(.f-in-sync)").on("click",function(){var t="?module=folder&action=create";o.storage_id&&(t+="&storage_id="+o.storage_id),o.folder_id&&(t+="&folder_id="+o.folder_id),h.files.loadDialog(t)}),h("#f-share-link").on("click",function(){o.folder_id&&h.files.loadDialog("?module=share&file_id="+o.folder_id)}),h("#f-public-link").on("click",function(){o.folder_id&&h.files.loadDialog("?module=share&public_link=1&file_id="+o.folder_id)}),this.$catalog.on("click",".js-show-copyprocess-info",function(){h.files.alertInfo(h(this).closest(".js-copytask-info-wrapper").find(".js-copytask-info").html())})},FilesCatalog.prototype.getFiles=function(){return this.$catalog.find(".f-catalog-item")},FilesCatalog.prototype.highlightFiles=function(){var e,t=this.storage_id,i=h.files.config.getLocaleStorage();0<t&&((i=i.get("files/all_counters_update_times")||{}).storage=i.storage||{},e=parseInt(i.storage[t],10),this.getFiles().each(function(){var t=h(this);0<t.data("update-time")-e&&t.addClass("highlighted")}))},FilesCatalog.prototype.onSelectFile=function(t,e){var o,s=this,t=t.shiftKey,a="checked"==e.attr("checked"),r=e.closest(".f-catalog-item"),l=!!s.$lastSelectedFile.length&&s.$lastSelectedFile;a&&t&&l?(t=s.getFiles(),o=!1,t.each(function(){var t=h(this),e=t.hasClass("selected"),i=t[0]==r[0],n=t[0]==l[0];if(i||n){if(o=!o,e||(s.selectFile(a,t),s.$lastSelectedFile=t),!o)return!1}else o&&!e&&t.find(".f-select-file").click()})):s.selectFile(a,r),s.$lastSelectedFile=a&&r},FilesCatalog.prototype.selectFile=function(t,e){var i=this,n=i.$operationMenu,o=i.$catalogCheckAll,s=i.$menuCheckAll,a=n.find(".f-operation-link.is-rename"),r=n.find(".f-operation-link.is-send"),l=e.data("type");t?(i.selectedFilesCount++,i.selectedFilesTypeCount[l]++,e.addClass("selected"),e.hasClass("highlighted")&&e.removeClass("highlighted").addClass("f-used-to-be-highlighted")):(i.selectedFilesCount--,i.selectedFilesTypeCount[l]--,e.removeClass("selected"),e.hasClass("f-used-to-be-highlighted")&&e.removeClass("f-used-to-be-highlighted").addClass("highlighted")),0==i.selectedFilesCount&&n.removeClass(i.storage.shown_class),1==i.selectedFilesCount&&(n.addClass(i.storage.shown_class),a.closest("li").show()),1<i.selectedFilesCount&&a.closest("li").hide(),0<i.selectedFilesTypeCount.folder?r.closest("li").hide():r.closest("li").show(),n.find(".f-operation-link .f-count").text("("+i.selectedFilesCount+")"),i.selectedFilesCount==i.getFiles().length?(o.attr("checked",!0),s.attr("checked",!0)):(o.attr("checked",!1),s.attr("checked",!1)),i.is_fixed_menu_init||(i.initFixedMenu(),i.is_fixed_menu_init=!0)},FilesCatalog.prototype.onSelectAll=function(i){var t=this.getFiles(),e=this.$catalogCheckAll;i=void 0!==i?i:"checked"==e.attr("checked"),this.$menuCheckAll.attr("checked",i),t.each(function(){var t=h(this).find(".f-select-file"),e="checked"==t.attr("checked");!e&&i&&t.click(),e&&!i&&t.click()})},FilesCatalog.prototype.showDialog=function(t,e){var i=this.$catalog.find(".f-select-file:checked"),n="";(e=e||{}).is_rename||!1?n=i.first().val():i.each(function(){n+="&file_id[]="+h(this).val()}),t=t+n,h.files.loadDialog(t)},FilesCatalog.prototype.initFixedMenu=function(){var i=this,n=i.$catalogWrapper,o=i.$operationMenu,s=h(window),t=o.offset(),e="is-fixed",a="absolute"==o.css("position"),r=!1,l={top:t.top,left:t.left,width:o.outerWidth(),height:o.outerHeight()};function c(){r=!0,a||n.css("padding-top",l.height),o.addClass(e)}function d(){r=!1,a||n.removeAttr("style"),o.removeAttr("style").removeClass(e)}s.on("scroll resize",function t(){var e=!(h.contains(document,o[0])&&o.hasClass(i.storage.shown_class));if(e)return i.is_fixed_menu_init=!1,s.off("scroll resize",t),!1;e=s.scrollTop()>l.top;!r&&e?c():r&&!e&&d();r&&o.width(n.width())}),s.trigger("scroll")},FilesCatalog}(jQuery),ElasticBlock=function(o){return(ElasticBlock=function(t){var e=this;e.$window=o(window),e.$wrapper=t.$wrapper,e.$block=t.$block,e.$content=t.$content,e.top_fix_class="fixed-to-top",e.bottom_fix_class="fixed-to-bottom",e.debug=!1,e.initClass()}).prototype.log=function(t){this.debug&&console.log(t)},ElasticBlock.prototype.initClass=function(){var l,c=this,e=c.top_fix_class,i=c.bottom_fix_class,d=c.$window,h=c.$wrapper,f=c.$block,u=Math.floor(d.width()),p=Math.floor(d.height()),g=f.offset().top,m=0,v=!0,_=!1,b=!1,y=!1,w=!1,x=0;function t(){o.contains(document,f[0])?function(){var t=Math.floor(c.$content.outerHeight()),e=Math.floor(f.outerHeight()),i=Math.floor(h.height()),n=d.scrollTop(),o=Math.floor(f.offset().top),s=n<x?1:-1,a=n-g;{var r;l=f.width(),!(!v&&p<i&&760<=u)||t&&t<e?v?function(t,e){var i=Math.floor(h.height()),n=Math.floor(h.offset().top),o=i+n-p-t,n=e-p;v=!1,e<i&&g<t&&(n<o?S(m):k())}(n,e):P():(r=e+m<p,i=n<=g,t=parseInt(o+e-n-p),e=0<t,t=t<=0,r?0<a+m?!_&&!b&&y||S(m):(_||y||b||w)&&P():i?(_||b||y)&&(!w||o<=g)&&P():e?0<s?m+n<=o&&(_||!y||b)&&(m?S(m):S()):_&&!y&&!b||C(o-g):!t||0<s?_&&!y&&!b||C(o-g):!_&&!y&&b||k())}x=n}():d.off("scroll",t)}function n(){o.contains(document,f[0])?(u=Math.floor(d.width()),p=Math.floor(d.height()),P(),d.trigger("scroll")):d.off("scroll",n)}function C(t){c.log("Manual top scroll position"),f.css("top",t).width(l).removeClass(e).removeClass(i),y=b=w=!(_=!0)}function S(t){c.log("Fixed to top scroll position"),f.removeAttr("style").width(l).removeClass(i).addClass(e),t&&(w=!0,f.css("top",t)),_=b=!1,y=!0}function k(){c.log("Fixed to bottom scroll position"),f.removeAttr("style").width(l).removeClass(e).addClass(i),_=y=w=!1,b=!0}function P(){c.log("Default scroll position"),f.removeAttr("style").removeClass(i).removeClass(e),_=y=b=w=!1}d.on("scroll",t).on("resize",n)},ElasticBlock}(jQuery),LongActionProcess=function(){function e(){for(;0<p.length;){var t=p.shift();t&&clearTimeout(t)}}function t(t){if(!t.url)throw new Error("Url is required");d=t.url,f=t.step_delay||f,u=t.rest_delay||u,g=t.post_data||g,i=t.onCleanup,n=t.onReady,o=t.onProgress,s=t.onError,a=t.onWarning,r=t.onStart,l=t.onStop,c=t.onAlways}var i,n,o,s,a,r,l,c,d="",h="",f=500,u=750,p=[],g={},m=function(){var t=$.extend(!0,{},g);t.processId=h,t.cleanup=1,$.post(d,t,function(t){i&&i(t)}).always(function(){e()})},v=function(t){t=t||f;t=setTimeout(function(){var t=$.extend(!0,{},g);t.processId=h,$.post(d,t,function(t){t?t.ready?(n&&n(t),m()):t.error?s&&s(t):t.progress?(o&&o(t),v()):t.warning?(a&&a(t),v()):v(u):v(u),c&&c(t)},"json").error(function(){v(u)})},t);p.push(t)};return $.extend(t.prototype,{start:function(){r&&r();var t=$.extend(!0,{},g);$.post(d,t,function(t){t&&t.processId?(h=t.processId,v(100),v(200)):t&&t.error?s&&s(t):s&&s("Server error")},"json").error(function(){s&&s("Server error")})},stop:function(){l&&l(),e()}}),t}();
//# sourceMappingURL=files.min.js.map
